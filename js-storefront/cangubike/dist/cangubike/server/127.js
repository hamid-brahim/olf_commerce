"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=127,exports.ids=[127],exports.modules={5127:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CheckoutWrapperModule:()=>CheckoutWrapperModule});var core=__webpack_require__(5e3),common=__webpack_require__(9808),spartacus_checkout_base_components=__webpack_require__(4462),spartacus_cart_base_core=__webpack_require__(3528),spartacus_core=__webpack_require__(3409),Subscription=__webpack_require__(2654),combineLatest=__webpack_require__(6053),of=__webpack_require__(1086),BehaviorSubject=__webpack_require__(591),filter=__webpack_require__(2198),distinctUntilChanged=__webpack_require__(5778),map=__webpack_require__(4850),take=__webpack_require__(2986),tap=__webpack_require__(2994),switchMap=__webpack_require__(7545),spartacus_checkout_b2b_root=__webpack_require__(8542),router=__webpack_require__(9516),spartacus_storefront=__webpack_require__(8807),spartacus_checkout_base_root=__webpack_require__(9527),spartacus_cart_base_root=__webpack_require__(8374),spartacus_user_account_root=__webpack_require__(7777);function CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_option_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",7),core._uU(1),core.qZA()),2&rf){const costCenter_r5=ctx.$implicit,ctx_r4=core.oxw(4);core.s9C("value",costCenter_r5.code),core.Q6J("selected",ctx_r4.costCenterId===costCenter_r5.code),core.xp6(1),core.hij(" ",costCenter_r5.name," ")}}function CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div")(1,"label")(2,"span",3),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"select",4),core.NdJ("change",__name(function($event){core.CHM(_r7);const ctx_r6=core.oxw(3);return core.KtG(ctx_r6.setCostCenter($event.target.value))},"CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_Template_select_change_5_listener")),core.YNc(6,CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_option_6_Template,2,3,"option",5),core.qZA(),core.TgZ(7,"span",6),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA()()()}if(2&rf){const costCenters_r2=core.oxw().ngIf;core.xp6(3),core.Oqu(core.lcZ(4,3,"checkoutB2B.costCenter")),core.xp6(3),core.Q6J("ngForOf",costCenters_r2),core.xp6(2),core.Oqu(core.lcZ(9,5,"checkoutB2B.availableLabel"))}}function CheckoutCostCenterComponent_ng_container_0_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_Template,10,7,"div",0),core.BQk()),2&rf){const costCenters_r2=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",0!==costCenters_r2.length)}}function CheckoutCostCenterComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"div",2),core.YNc(3,CheckoutCostCenterComponent_ng_container_0_ng_container_3_Template,2,1,"ng-container",0),core.ALo(4,"async"),core.qZA()(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Q6J("ngIf",core.lcZ(4,1,ctx_r0.costCenters$))}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_3_Template(rf,ctx){if(1&rf){const _r13=core.EpF();core.TgZ(0,"div",12)(1,"div",16)(2,"button",17),core.NdJ("click",__name(function(){core.CHM(_r13);const ctx_r12=core.oxw(4);return core.KtG(ctx_r12.showNewAddressForm())},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_3_Template_button_click_2_listener")),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()()()}2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,1,"checkoutAddress.addNewAddress")," "))}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template(rf,ctx){if(1&rf){const _r17=core.EpF();core.TgZ(0,"div",18)(1,"div",19),core.NdJ("click",__name(function(){const card_r14=core.CHM(_r17).$implicit,ctx_r16=core.oxw(4);return core.KtG(ctx_r16.selectAddress(card_r14.address))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template_div_click_1_listener")),core.TgZ(2,"cx-card",20),core.NdJ("sendCard",__name(function(){const card_r14=core.CHM(_r17).$implicit,ctx_r18=core.oxw(4);return core.KtG(ctx_r18.selectAddress(card_r14.address))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template_cx_card_sendCard_2_listener")),core.qZA()()()}if(2&rf){const card_r14=ctx.$implicit,i_r15=ctx.index;core.xp6(2),core.Q6J("border",!0)("index",i_r15)("fitToContainer",!0)("content",card_r14.card)}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template(rf,ctx){if(1&rf){const _r20=core.EpF();core.TgZ(0,"p",8),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.YNc(3,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_3_Template,5,3,"div",9),core.TgZ(4,"div",10),core.YNc(5,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template,3,4,"div",11),core.qZA(),core.TgZ(6,"div",12)(7,"div",13)(8,"button",14),core.NdJ("click",__name(function(){core.CHM(_r20);const ctx_r19=core.oxw(3);return core.KtG(ctx_r19.back())},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template_button_click_8_listener")),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA()(),core.TgZ(11,"div",13)(12,"button",15),core.NdJ("click",__name(function(){core.CHM(_r20);const ctx_r21=core.oxw(3);return core.KtG(ctx_r21.next())},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template_button_click_12_listener")),core.ALo(13,"async"),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA()()()}if(2&rf){const cards_r3=core.oxw(2).ngIf,ctx_r7=core.oxw();let tmp_4_0;core.xp6(1),core.hij(" ",core.lcZ(2,6,"checkoutAddress.selectYourDeliveryAddress")," "),core.xp6(2),core.Q6J("ngIf",!ctx_r7.isAccountPayment),core.xp6(2),core.Q6J("ngForOf",cards_r3),core.xp6(4),core.hij(" ",core.lcZ(10,8,ctx_r7.backBtnText)," "),core.xp6(3),core.Q6J("disabled",!(null!=(tmp_4_0=core.lcZ(13,10,ctx_r7.selectedAddress$))&&tmp_4_0.id)),core.xp6(2),core.hij(" ",core.lcZ(15,12,"common.continue")," ")}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.TgZ(0,"cx-address-form",23),core.NdJ("backToAddress",__name(function(){core.CHM(_r27);const ctx_r26=core.oxw(4);return core.KtG(ctx_r26.hideNewAddressForm(!1))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template_cx_address_form_backToAddress_0_listener"))("submitAddress",__name(function($event){core.CHM(_r27);const ctx_r28=core.oxw(4);return core.KtG(ctx_r28.addAddress($event))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template_cx_address_form_submitAddress_0_listener")),core.qZA()}2&rf&&core.Q6J("showTitleCode",!0)}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template(rf,ctx){if(1&rf){const _r30=core.EpF();core.TgZ(0,"cx-address-form",24),core.NdJ("backToAddress",__name(function(){core.CHM(_r30);const ctx_r29=core.oxw(4);return core.KtG(ctx_r29.hideNewAddressForm(!0))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template_cx_address_form_backToAddress_0_listener"))("submitAddress",__name(function($event){core.CHM(_r30);const ctx_r31=core.oxw(4);return core.KtG(ctx_r31.addAddress($event))},"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template_cx_address_form_submitAddress_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r25=core.oxw(4);core.s9C("cancelBtnLabel",core.lcZ(1,3,ctx_r25.backBtnText)),core.Q6J("showTitleCode",!0)("setAsDefaultField",!ctx_r25.isGuestCheckout)}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template(rf,ctx){if(1&rf&&(core.YNc(0,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template,1,1,"cx-address-form",21),core.YNc(1,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template,2,5,"ng-template",null,22,core.W1O)),2&rf){const _r24=core.MAs(2),cards_r3=core.oxw(2).ngIf;core.Q6J("ngIf",cards_r3.length)("ngIfElse",_r24)}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"div",4),core.ALo(2,"cxTranslate"),core.YNc(3,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template,1,0,"ng-container",5),core.YNc(4,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template,16,14,"ng-template",null,6,core.W1O),core.YNc(6,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template,3,2,"ng-template",null,7,core.W1O),core.BQk()),2&rf){const _r6=core.MAs(5),_r8=core.MAs(7),cards_r3=core.oxw().ngIf,ctx_r4=core.oxw();core.xp6(1),core.uIk("aria-label",core.lcZ(2,4,"common.loaded")),core.xp6(2),core.Q6J("ngIf",ctx_r4.isAccountPayment||(null==cards_r3?null:cards_r3.length)&&!ctx_r4.addressFormOpened)("ngIfThen",_r6)("ngIfElse",_r8)}}function B2BCheckoutDeliveryAddressComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template,8,6,"ng-container",3),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw(),_r1=core.MAs(6);core.xp6(1),core.Q6J("ngIf",!core.lcZ(2,2,ctx_r0.isUpdating$))("ngIfElse",_r1)}}function B2BCheckoutDeliveryAddressComponent_ng_template_5_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",25),core._UZ(1,"cx-spinner"),core.qZA())}__name(CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_option_6_Template,"CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_option_6_Template"),__name(CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_Template,"CheckoutCostCenterComponent_ng_container_0_ng_container_3_div_1_Template"),__name(CheckoutCostCenterComponent_ng_container_0_ng_container_3_Template,"CheckoutCostCenterComponent_ng_container_0_ng_container_3_Template"),__name(CheckoutCostCenterComponent_ng_container_0_Template,"CheckoutCostCenterComponent_ng_container_0_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_3_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_3_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_5_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_container_3_Template,"B2BCheckoutDeliveryAddressComponent_ng_container_3_Template"),__name(B2BCheckoutDeliveryAddressComponent_ng_template_5_Template,"B2BCheckoutDeliveryAddressComponent_ng_template_5_Template");const _c0=["poNumber"];function CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_div_19_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"div",15)(1,"input",16),core.NdJ("change",__name(function(){const type_r7=core.CHM(_r9).$implicit,ctx_r8=core.oxw(3);return core.KtG(ctx_r8.changeType(type_r7.code))},"CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_div_19_Template_input_change_1_listener")),core.qZA(),core.TgZ(2,"label",17)(3,"div",18),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA()()()}if(2&rf){const type_r7=ctx.$implicit,ctx_r6=core.oxw(3);core.xp6(1),core.MGl("id","paymentType-",type_r7.code,""),core.Q6J("value",type_r7.code)("checked",type_r7.code===ctx_r6.typeSelected),core.xp6(1),core.MGl("for","paymentType-",type_r7.code,""),core.xp6(2),core.hij(" ",core.lcZ(5,5,"paymentTypes.paymentType_"+(null==type_r7?null:type_r7.code))," ")}}function CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.ynx(0),core._UZ(1,"div",4),core.ALo(2,"cxTranslate"),core.TgZ(3,"div",5)(4,"div",6)(5,"label")(6,"span",7),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA(),core._UZ(9,"input",8,9),core.ALo(11,"cxTranslate"),core.ALo(12,"async"),core.qZA()()(),core.TgZ(13,"div",5)(14,"div",6)(15,"label",10)(16,"span",7),core._uU(17),core.ALo(18,"cxTranslate"),core.qZA(),core.YNc(19,CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_div_19_Template,6,7,"div",11),core.qZA()()(),core.TgZ(20,"div",12)(21,"div",6)(22,"button",13),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.back())},"CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template_button_click_22_listener")),core._uU(23),core.ALo(24,"cxTranslate"),core.qZA()(),core.TgZ(25,"div",6)(26,"button",14),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r12=core.oxw(2);return core.KtG(ctx_r12.next())},"CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template_button_click_26_listener")),core._uU(27),core.ALo(28,"cxTranslate"),core.qZA()()(),core.BQk()}if(2&rf){const paymentTypes_r3=core.oxw().ngIf,ctx_r4=core.oxw();core.xp6(1),core.uIk("aria-label",core.lcZ(2,8,"common.loaded")),core.xp6(6),core.Oqu(core.lcZ(8,10,"checkoutB2B.poNumber")),core.xp6(2),core.s9C("placeholder",core.lcZ(11,12,"checkoutB2B.placeholder")),core.s9C("value",core.lcZ(12,14,ctx_r4.cartPoNumber$)),core.xp6(8),core.Oqu(core.lcZ(18,16,"paymentTypes.title")),core.xp6(2),core.Q6J("ngForOf",paymentTypes_r3),core.xp6(4),core.hij(" ",core.lcZ(24,18,"checkout.backToCart")," "),core.xp6(4),core.hij(" ",core.lcZ(28,20,"common.continue")," ")}}function CheckoutPaymentTypeComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template,29,22,"ng-container",3),core.ALo(2,"async"),core.ALo(3,"async"),core.BQk()),2&rf){const paymentTypes_r3=ctx.ngIf,ctx_r0=core.oxw(),_r1=core.MAs(6);core.xp6(1),core.Q6J("ngIf",!!paymentTypes_r3.length&&core.lcZ(2,2,ctx_r0.typeSelected$)&&!core.lcZ(3,4,ctx_r0.isUpdating$))("ngIfElse",_r1)}}function CheckoutPaymentTypeComponent_ng_template_5_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",19),core._UZ(1,"cx-spinner"),core.qZA())}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r1=core.MAs(8);core.xp6(1),core.Q6J("ngTemplateOutlet",_r1)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r3=core.MAs(10);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r11=core.MAs(18);core.xp6(1),core.Q6J("ngTemplateOutlet",_r11)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r5=core.MAs(12);core.xp6(1),core.Q6J("ngTemplateOutlet",_r5)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0)(1,13),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template,2,1,"ng-container",14),core.YNc(3,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_Template,2,1,"ng-container",14),core.YNc(4,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_Template,2,1,"ng-container",14),core.YNc(5,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_Template,2,1,"ng-container",14),core.BQk()()),2&rf){const step_r17=ctx.$implicit,ctx_r15=core.oxw(2);core.xp6(1),core.Q6J("ngSwitch",step_r17.type[0]),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r15.checkoutStepTypePaymentType),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r15.checkoutStepTypePaymentType),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r15.checkoutStepTypePaymentDetails),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r15.checkoutStepTypeDeliveryAddress)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r7=core.MAs(14);core.xp6(1),core.Q6J("ngTemplateOutlet",_r7)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template,1,0,"ng-container",15),core.BQk()),2&rf){core.oxw(3);const _r9=core.MAs(16);core.xp6(1),core.Q6J("ngTemplateOutlet",_r9)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0)(1,13),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template,2,1,"ng-container",14),core.YNc(3,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template,2,1,"ng-container",14),core.BQk()()),2&rf){const step_r26=ctx.$implicit,ctx_r16=core.oxw(2);core.xp6(1),core.Q6J("ngSwitch",step_r26.type[0]),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r16.checkoutStepTypeDeliveryAddress),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r16.checkoutStepTypeDeliveryMode)}}function B2BCheckoutReviewSubmitComponent_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",10),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template,6,5,"ng-container",11),core.qZA(),core.TgZ(3,"div",12),core.YNc(4,B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template,4,3,"ng-container",11),core.qZA(),core.BQk()),2&rf){const steps_r14=ctx.ngIf,ctx_r0=core.oxw();core.xp6(2),core.Q6J("ngForOf",ctx_r0.paymentSteps(steps_r14)),core.xp6(2),core.Q6J("ngForOf",ctx_r0.deliverySteps(steps_r14))}}__name(CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_div_19_Template,"CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_div_19_Template"),__name(CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template,"CheckoutPaymentTypeComponent_ng_container_3_ng_container_1_Template"),__name(CheckoutPaymentTypeComponent_ng_container_3_Template,"CheckoutPaymentTypeComponent_ng_container_3_Template"),__name(CheckoutPaymentTypeComponent_ng_template_5_Template,"CheckoutPaymentTypeComponent_ng_template_5_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_3_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_4_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_5_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_5_Template,"B2BCheckoutReviewSubmitComponent_ng_container_5_Template");const _c1=__name(function(a0){return{cxRoute:a0}},"_c1");function B2BCheckoutReviewSubmitComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",16),core._UZ(1,"cx-card",17),core.ALo(2,"async"),core.ALo(3,"async"),core.TgZ(4,"div",18)(5,"a",19),core.ALo(6,"cxTranslate"),core.ALo(7,"cxUrl"),core._UZ(8,"cx-icon",20),core.qZA()()()),2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("content",core.lcZ(2,4,ctx_r2.getPoNumberCard(core.lcZ(3,6,ctx_r2.poNumber$)))),core.xp6(4),core.Q6J("routerLink",core.lcZ(7,10,core.VKq(12,_c1,ctx_r2.getCheckoutStepUrl(ctx_r2.checkoutStepTypePaymentType)))),core.uIk("aria-label",core.lcZ(6,8,"checkoutReview.editPaymentType")),core.xp6(3),core.Q6J("type",ctx_r2.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-card",17),core.ALo(1,"async")),2&rf){const paymentType_r32=ctx.ngIf,ctx_r31=core.oxw(2);core.Q6J("content",core.lcZ(1,1,ctx_r31.getPaymentTypeCard(paymentType_r32)))}}function B2BCheckoutReviewSubmitComponent_ng_template_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",16),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template,2,3,"cx-card",21),core.ALo(2,"async"),core.TgZ(3,"div",18)(4,"a",19),core.ALo(5,"cxTranslate"),core.ALo(6,"cxUrl"),core._UZ(7,"cx-icon",20),core.qZA()()()),2&rf){const ctx_r4=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,4,ctx_r4.paymentType$)),core.xp6(3),core.Q6J("routerLink",core.lcZ(6,8,core.VKq(10,_c1,ctx_r4.getCheckoutStepUrl(ctx_r4.checkoutStepTypePaymentType)))),core.uIk("aria-label",core.lcZ(5,6,"checkoutReview.editPaymentType")),core.xp6(3),core.Q6J("type",ctx_r4.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_cx_card_2_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-card",17),core.ALo(1,"async")),2&rf){const costCenter_r35=ctx.ngIf,ctx_r34=core.oxw(3);core.Q6J("content",core.lcZ(1,1,ctx_r34.getCostCenterCard(costCenter_r35)))}}function B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",16),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_cx_card_2_Template,2,3,"cx-card",21),core.ALo(3,"async"),core.TgZ(4,"div",18)(5,"a",19),core.ALo(6,"cxTranslate"),core.ALo(7,"cxUrl"),core._UZ(8,"cx-icon",20),core.qZA()()(),core.BQk()),2&rf){const ctx_r33=core.oxw(2);core.xp6(2),core.Q6J("ngIf",core.lcZ(3,4,ctx_r33.costCenter$)),core.xp6(3),core.Q6J("routerLink",core.lcZ(7,8,core.VKq(10,_c1,ctx_r33.getCheckoutStepUrl(ctx_r33.checkoutStepTypeDeliveryAddress)))),core.uIk("aria-label",core.lcZ(6,6,"checkoutReview.editDeliveryAddressDetails")),core.xp6(3),core.Q6J("type",ctx_r33.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_template_11_Template(rf,ctx){if(1&rf&&(core.YNc(0,B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_Template,9,12,"ng-container",3),core.ALo(1,"async")),2&rf){const ctx_r6=core.oxw();core.Q6J("ngIf",core.lcZ(1,1,ctx_r6.isAccountPayment$))}}function B2BCheckoutReviewSubmitComponent_ng_template_13_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",23),core._UZ(1,"cx-card",17),core.ALo(2,"async"),core.TgZ(3,"div",18)(4,"a",19),core.ALo(5,"cxTranslate"),core.ALo(6,"cxUrl"),core._UZ(7,"cx-icon",20),core.qZA()()()),2&rf){const deliveryAddress_r37=ctx.ngIf,ctx_r36=core.oxw(2);core.xp6(1),core.Q6J("content",core.lcZ(2,4,ctx_r36.getDeliveryAddressCard(deliveryAddress_r37))),core.xp6(3),core.Q6J("routerLink",core.lcZ(6,8,core.VKq(10,_c1,ctx_r36.getCheckoutStepUrl(ctx_r36.checkoutStepTypeDeliveryAddress)))),core.uIk("aria-label",core.lcZ(5,6,"checkoutReview.editDeliveryAddressDetails")),core.xp6(3),core.Q6J("type",ctx_r36.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_template_13_Template(rf,ctx){if(1&rf&&(core.YNc(0,B2BCheckoutReviewSubmitComponent_ng_template_13_div_0_Template,8,12,"div",22),core.ALo(1,"async")),2&rf){const ctx_r8=core.oxw();core.Q6J("ngIf",core.lcZ(1,1,ctx_r8.deliveryAddress$))}}function B2BCheckoutReviewSubmitComponent_ng_template_15_cx_card_1_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-card",17),core.ALo(1,"async")),2&rf){const deliveryMode_r39=ctx.ngIf,ctx_r38=core.oxw(2);core.Q6J("content",core.lcZ(1,1,ctx_r38.getDeliveryModeCard(deliveryMode_r39)))}}function B2BCheckoutReviewSubmitComponent_ng_template_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",24),core.YNc(1,B2BCheckoutReviewSubmitComponent_ng_template_15_cx_card_1_Template,2,3,"cx-card",21),core.ALo(2,"async"),core.TgZ(3,"div",18)(4,"a",19),core.ALo(5,"cxTranslate"),core.ALo(6,"cxUrl"),core._UZ(7,"cx-icon",20),core.qZA()()()),2&rf){const ctx_r10=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,4,ctx_r10.deliveryMode$)),core.xp6(3),core.Q6J("routerLink",core.lcZ(6,8,core.VKq(10,_c1,ctx_r10.getCheckoutStepUrl(ctx_r10.checkoutStepTypeDeliveryMode)))),core.uIk("aria-label",core.lcZ(5,6,"checkoutReview.editDeliveryMode")),core.xp6(3),core.Q6J("type",ctx_r10.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_template_17_cx_card_2_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-card",17),core.ALo(1,"async")),2&rf){const paymentDetails_r41=ctx.ngIf,ctx_r40=core.oxw(2);core.Q6J("content",core.lcZ(1,1,ctx_r40.getPaymentMethodCard(paymentDetails_r41)))}}function B2BCheckoutReviewSubmitComponent_ng_template_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",25)(1,"div"),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_template_17_cx_card_2_Template,2,3,"cx-card",21),core.ALo(3,"async"),core.qZA(),core.TgZ(4,"div",18)(5,"a",19),core.ALo(6,"cxTranslate"),core.ALo(7,"cxUrl"),core._UZ(8,"cx-icon",20),core.qZA()()()),2&rf){const ctx_r12=core.oxw();core.xp6(2),core.Q6J("ngIf",core.lcZ(3,4,ctx_r12.paymentDetails$)),core.xp6(3),core.Q6J("routerLink",core.lcZ(7,8,core.VKq(10,_c1,ctx_r12.getCheckoutStepUrl(ctx_r12.checkoutStepTypePaymentDetails)))),core.uIk("aria-label",core.lcZ(6,6,"checkoutReview.editPaymentDetails")),core.xp6(3),core.Q6J("type",ctx_r12.iconTypes.PENCIL)}}function B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_ng_template_2_Template(rf,ctx){}__name(B2BCheckoutReviewSubmitComponent_ng_template_7_Template,"B2BCheckoutReviewSubmitComponent_ng_template_7_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template,"B2BCheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_9_Template,"B2BCheckoutReviewSubmitComponent_ng_template_9_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_cx_card_2_Template,"B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_cx_card_2_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_Template,"B2BCheckoutReviewSubmitComponent_ng_template_11_ng_container_0_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_11_Template,"B2BCheckoutReviewSubmitComponent_ng_template_11_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_13_div_0_Template,"B2BCheckoutReviewSubmitComponent_ng_template_13_div_0_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_13_Template,"B2BCheckoutReviewSubmitComponent_ng_template_13_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_15_cx_card_1_Template,"B2BCheckoutReviewSubmitComponent_ng_template_15_cx_card_1_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_15_Template,"B2BCheckoutReviewSubmitComponent_ng_template_15_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_17_cx_card_2_Template,"B2BCheckoutReviewSubmitComponent_ng_template_17_cx_card_2_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_template_17_Template,"B2BCheckoutReviewSubmitComponent_ng_template_17_Template"),__name(B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_ng_template_2_Template,"B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_ng_template_2_Template");const _c2=__name(function(){return[]},"_c2"),_c3=__name(function(a0,a2){return{items:a0,readonly:!0,promotionLocation:a2}},"_c3");function B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",29),core._UZ(1,"cx-promotions",30),core.YNc(2,B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_ng_template_2_Template,0,0,"ng-template",31),core.qZA()),2&rf){const entries_r44=ctx.ngIf,cart_r42=core.oxw().ngIf,ctx_r43=core.oxw();core.xp6(1),core.Q6J("promotions",(cart_r42.appliedOrderPromotions||core.DdM(4,_c2)).concat(cart_r42.potentialOrderPromotions||core.DdM(3,_c2))),core.xp6(1),core.Q6J("cxOutlet",ctx_r43.cartOutlets.CART_ITEM_LIST)("cxOutletContext",core.WLB(5,_c3,entries_r44,ctx_r43.promotionLocation))}}__name(B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_Template,"B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_Template");const _c4=__name(function(a0){return{count:a0}},"_c4");function B2BCheckoutReviewSubmitComponent_ng_container_19_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",26),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",27),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.YNc(7,B2BCheckoutReviewSubmitComponent_ng_container_19_div_7_Template,3,8,"div",28),core.ALo(8,"async"),core.BQk()),2&rf){const cart_r42=ctx.ngIf,ctx_r13=core.oxw();core.xp6(2),core.AsE(" ",core.xi3(3,4,"cartItems.cartTotal",core.VKq(11,_c4,cart_r42.deliveryItemsQuantity)),": ",null==cart_r42.totalPrice?null:cart_r42.totalPrice.formattedValue," "),core.xp6(3),core.hij(" ",core.lcZ(6,7,"checkoutReview.placeOrder")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(8,9,ctx_r13.entries$))}}__name(B2BCheckoutReviewSubmitComponent_ng_container_19_Template,"B2BCheckoutReviewSubmitComponent_ng_container_19_Template");class CheckoutCostCenterComponent{constructor(userCostCenterService,checkoutCostCenterFacade,checkoutPaymentTypeFacade){this.userCostCenterService=userCostCenterService,this.checkoutCostCenterFacade=checkoutCostCenterFacade,this.checkoutPaymentTypeFacade=checkoutPaymentTypeFacade,this.subscription=new Subscription.w,this.userCostCenters$=this.userCostCenterService.getActiveCostCenters().pipe((0,filter.h)(costCenters=>!!costCenters))}get disabled(){return!this.isAccountPayment}ngOnInit(){this.subscription.add(this.checkoutPaymentTypeFacade.isAccountPayment().pipe((0,distinctUntilChanged.x)()).subscribe(isAccountPayment=>{this.isAccountPayment=isAccountPayment})),this.costCenters$=(0,combineLatest.aj)([this.userCostCenters$,this.checkoutCostCenterFacade.getCostCenterState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data),(0,distinctUntilChanged.x)())]).pipe((0,take.q)(1),(0,tap.b)(([costCenters,costCenter])=>{costCenter?this.costCenterId=costCenter.code:this.setCostCenter(costCenters[0].code)}),(0,map.U)(([costCenters])=>costCenters))}setCostCenter(selectCostCenter){this.costCenterId=selectCostCenter,this.checkoutCostCenterFacade.setCostCenter(this.costCenterId)}ngOnDestroy(){this.subscription.unsubscribe()}}__name(CheckoutCostCenterComponent,"CheckoutCostCenterComponent"),CheckoutCostCenterComponent.\u0275fac=__name(function(t){return new(t||CheckoutCostCenterComponent)(core.Y36(spartacus_core.mjM),core.Y36(spartacus_checkout_b2b_root.vs),core.Y36(spartacus_checkout_b2b_root.Go))},"CheckoutCostCenterComponent_Factory"),CheckoutCostCenterComponent.\u0275cmp=core.Xpm({type:CheckoutCostCenterComponent,selectors:[["cx-cost-center"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("hidden",ctx.disabled)},"CheckoutCostCenterComponent_HostBindings"),decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-12","col-xl-10"],[1,"label-content","required"],[3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"label-content"],[3,"value","selected"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,CheckoutCostCenterComponent_ng_container_0_Template,5,3,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.isAccountPayment)},"CheckoutCostCenterComponent_Template"),dependencies:[common.sg,common.O5,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class CheckoutCostCenterModule{}__name(CheckoutCostCenterModule,"CheckoutCostCenterModule"),CheckoutCostCenterModule.\u0275fac=__name(function(t){return new(t||CheckoutCostCenterModule)},"CheckoutCostCenterModule_Factory"),CheckoutCostCenterModule.\u0275mod=core.oAB({type:CheckoutCostCenterModule}),CheckoutCostCenterModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,spartacus_core.pEA.withConfig({cmsComponents:{CheckoutCostCenterComponent:{component:CheckoutCostCenterComponent,guards:[spartacus_checkout_base_components.o7,spartacus_checkout_base_components.k4,spartacus_cart_base_core.i4]}}})]});class B2BCheckoutDeliveryAddressComponent extends spartacus_checkout_base_components.B2{constructor(userAddressService,checkoutDeliveryAddressFacade,activatedRoute,translationService,activeCartFacade,checkoutStepService,checkoutDeliveryModesFacade,globalMessageService,checkoutCostCenterFacade,checkoutPaymentTypeFacade,userCostCenterService){super(userAddressService,checkoutDeliveryAddressFacade,activatedRoute,translationService,activeCartFacade,checkoutStepService,checkoutDeliveryModesFacade,globalMessageService),this.userAddressService=userAddressService,this.checkoutDeliveryAddressFacade=checkoutDeliveryAddressFacade,this.activatedRoute=activatedRoute,this.translationService=translationService,this.activeCartFacade=activeCartFacade,this.checkoutStepService=checkoutStepService,this.checkoutDeliveryModesFacade=checkoutDeliveryModesFacade,this.globalMessageService=globalMessageService,this.checkoutCostCenterFacade=checkoutCostCenterFacade,this.checkoutPaymentTypeFacade=checkoutPaymentTypeFacade,this.userCostCenterService=userCostCenterService,this.subscriptions=new Subscription.w,this.isAccountPayment$=this.checkoutPaymentTypeFacade.isAccountPayment().pipe((0,distinctUntilChanged.x)()),this.costCenterAddresses$=this.checkoutCostCenterFacade.getCostCenterState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data),(0,distinctUntilChanged.x)((prev,curr)=>(null==prev?void 0:prev.code)===(null==curr?void 0:curr.code)),(0,switchMap.w)(costCenter=>(this.doneAutoSelect=!1,null!=costCenter&&costCenter.code?this.userCostCenterService.getCostCenterAddresses(costCenter.code):(0,of.of)([])))),this.creditCardAddressLoading$=super.getAddressLoading(),this.accountAddressLoading$=(0,combineLatest.aj)([this.creditCardAddressLoading$,this.checkoutCostCenterFacade.getCostCenterState().pipe((0,map.U)(state=>state.loading))]).pipe((0,map.U)(([creditCardAddressLoading,costCenterLoading])=>creditCardAddressLoading||costCenterLoading),(0,distinctUntilChanged.x)()),this.isAccountPayment=!1}ngOnInit(){this.subscriptions.add(this.isAccountPayment$.subscribe(isAccount=>this.isAccountPayment=isAccount)),super.ngOnInit()}loadAddresses(){this.isAccountPayment||super.loadAddresses()}getAddressLoading(){return this.isAccountPayment$.pipe((0,switchMap.w)(isAccountPayment=>isAccountPayment?this.accountAddressLoading$:this.creditCardAddressLoading$))}getSupportedAddresses(){return this.isAccountPayment$.pipe((0,switchMap.w)(isAccountPayment=>isAccountPayment?this.costCenterAddresses$:super.getSupportedAddresses()))}selectDefaultAddress(addresses,selected){!this.doneAutoSelect&&(null==addresses?void 0:addresses.length)&&(!selected||0===Object.keys(selected).length)&&(this.isAccountPayment?1===addresses.length&&this.setAddress(addresses[0]):super.selectDefaultAddress(addresses,selected),this.doneAutoSelect=!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}}__name(B2BCheckoutDeliveryAddressComponent,"B2BCheckoutDeliveryAddressComponent"),B2BCheckoutDeliveryAddressComponent.\u0275fac=__name(function(t){return new(t||B2BCheckoutDeliveryAddressComponent)(core.Y36(spartacus_core.kFJ),core.Y36(spartacus_checkout_base_root.ys),core.Y36(router.gz),core.Y36(spartacus_core.D7D),core.Y36(spartacus_cart_base_root.bu),core.Y36(spartacus_checkout_base_components.hF),core.Y36(spartacus_checkout_base_root.BG),core.Y36(spartacus_core.IWp),core.Y36(spartacus_checkout_b2b_root.vs),core.Y36(spartacus_checkout_b2b_root.Go),core.Y36(spartacus_core.mjM))},"B2BCheckoutDeliveryAddressComponent_Factory"),B2BCheckoutDeliveryAddressComponent.\u0275cmp=core.Xpm({type:B2BCheckoutDeliveryAddressComponent,selectors:[["cx-delivery-address"]],features:[core.qOj],decls:7,vars:6,consts:[[1,"cx-checkout-title","d-none","d-lg-block","d-xl-block"],[4,"ngIf"],["loading",""],[4,"ngIf","ngIfElse"],["role","status"],[4,"ngIf","ngIfThen","ngIfElse"],["showExistingAddresses",""],["newAddressForm",""],[1,"cx-checkout-text"],["class","cx-checkout-btns row",4,"ngIf"],[1,"cx-checkout-body","row"],["class","cx-delivery-address-card col-md-12 col-lg-6",4,"ngFor","ngForOf"],[1,"cx-checkout-btns","row"],[1,"col-md-12","col-lg-6"],[1,"cx-btn","btn","btn-block","btn-action",3,"click"],[1,"cx-btn","btn","btn-block","btn-primary",3,"disabled","click"],[1,"col-sm-12","col-md-12","col-lg-6"],[1,"btn","btn-block","btn-action",3,"click"],[1,"cx-delivery-address-card","col-md-12","col-lg-6"],[1,"cx-delivery-address-card-inner",3,"click"],[3,"border","index","fitToContainer","content","sendCard"],[3,"showTitleCode","backToAddress","submitAddress",4,"ngIf","ngIfElse"],["initialAddressForm",""],[3,"showTitleCode","backToAddress","submitAddress"],[3,"showTitleCode","setAsDefaultField","cancelBtnLabel","backToAddress","submitAddress"],[1,"cx-spinner"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"h2",0),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.YNc(3,B2BCheckoutDeliveryAddressComponent_ng_container_3_Template,3,4,"ng-container",1),core.ALo(4,"async"),core.YNc(5,B2BCheckoutDeliveryAddressComponent_ng_template_5_Template,2,0,"ng-template",null,2,core.W1O)),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,2,"checkoutAddress.deliveryAddress"),"\n"),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx.cards$)))},"B2BCheckoutDeliveryAddressComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.CY4,spartacus_storefront.AkF,spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class B2BCheckoutDeliveryAddressModule{}__name(B2BCheckoutDeliveryAddressModule,"B2BCheckoutDeliveryAddressModule"),B2BCheckoutDeliveryAddressModule.\u0275fac=__name(function(t){return new(t||B2BCheckoutDeliveryAddressModule)},"B2BCheckoutDeliveryAddressModule_Factory"),B2BCheckoutDeliveryAddressModule.\u0275mod=core.oAB({type:B2BCheckoutDeliveryAddressModule}),B2BCheckoutDeliveryAddressModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CheckoutDeliveryAddress:{component:B2BCheckoutDeliveryAddressComponent,guards:[spartacus_checkout_base_components.o7,spartacus_checkout_base_components.k4,spartacus_cart_base_core.i4]}}})],imports:[common.ez,router.Bz,spartacus_storefront.qUU,spartacus_storefront.dTQ,spartacus_storefront.Fme,spartacus_core.LUR]});class CheckoutPaymentTypeComponent{constructor(checkoutPaymentTypeFacade,checkoutStepService,activatedRoute){this.checkoutPaymentTypeFacade=checkoutPaymentTypeFacade,this.checkoutStepService=checkoutStepService,this.activatedRoute=activatedRoute,this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=(0,combineLatest.aj)([this.busy$,this.checkoutPaymentTypeFacade.getSelectedPaymentTypeState().pipe((0,map.U)(state=>state.loading))]).pipe((0,map.U)(([busy,loading])=>busy||loading),(0,distinctUntilChanged.x)()),this.paymentTypes$=this.checkoutPaymentTypeFacade.getPaymentTypes(),this.typeSelected$=this.checkoutPaymentTypeFacade.getSelectedPaymentTypeState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data),(0,filter.h)(spartacus_core.pTN),(0,distinctUntilChanged.x)(),(0,tap.b)(selected=>{this.typeSelected=null==selected?void 0:selected.code,this.checkoutStepService.resetSteps(),this.checkoutStepService.disableEnableStep("paymentDetails",(null==selected?void 0:selected.code)===spartacus_checkout_b2b_root.uj.ACCOUNT_PAYMENT)})),this.cartPoNumber$=this.checkoutPaymentTypeFacade.getPurchaseOrderNumberState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data),(0,filter.h)(spartacus_core.pTN),(0,distinctUntilChanged.x)())}changeType(code){this.busy$.next(!0),this.typeSelected=code,this.checkoutPaymentTypeFacade.setPaymentType(code,this.poNumberInputElement.nativeElement.value).subscribe({complete:()=>this.onSuccess(),error:()=>this.onError()})}next(){if(!this.typeSelected)return;const poNumberInput=this.poNumberInputElement.nativeElement.value;poNumberInput!==(0,spartacus_core.P51)(this.cartPoNumber$)?(this.busy$.next(!0),this.checkoutPaymentTypeFacade.setPaymentType(this.typeSelected,poNumberInput).subscribe({complete:()=>this.checkoutStepService.next(this.activatedRoute),error:()=>this.onError()})):this.checkoutStepService.next(this.activatedRoute)}back(){this.checkoutStepService.back(this.activatedRoute)}onSuccess(){this.busy$.next(!1)}onError(){this.busy$.next(!1)}}__name(CheckoutPaymentTypeComponent,"CheckoutPaymentTypeComponent"),CheckoutPaymentTypeComponent.\u0275fac=__name(function(t){return new(t||CheckoutPaymentTypeComponent)(core.Y36(spartacus_checkout_b2b_root.Go),core.Y36(spartacus_checkout_base_components.hF),core.Y36(router.gz))},"CheckoutPaymentTypeComponent_Factory"),CheckoutPaymentTypeComponent.\u0275cmp=core.Xpm({type:CheckoutPaymentTypeComponent,selectors:[["cx-payment-type"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.poNumberInputElement=_t.first)}},"CheckoutPaymentTypeComponent_Query"),decls:7,vars:6,consts:[[1,"cx-checkout-title","d-none","d-lg-block","d-xl-block"],[4,"ngIf"],["loading",""],[4,"ngIf","ngIfElse"],["role","status"],[1,"row"],[1,"col-md-12","col-lg-6"],[1,"label-content"],["formControlName","poNumber","type","text",1,"form-control",3,"placeholder","value"],["poNumber",""],[1,"cx-payment-type-container"],["class","form-check",4,"ngFor","ngForOf"],[1,"cx-checkout-btns","row"],[1,"btn","btn-block","btn-action",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[1,"form-check"],["role","radio","type","radio","aria-checked","true","formControlName","paymentType",1,"form-check-input",3,"id","value","checked","change"],[1,"cx-payment-type-label","form-check-label","form-radio-label",3,"for"],[1,"cx-payment-type"],[1,"cx-spinner"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"h2",0),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.YNc(3,CheckoutPaymentTypeComponent_ng_container_3_Template,4,6,"ng-container",1),core.ALo(4,"async"),core.YNc(5,CheckoutPaymentTypeComponent_ng_template_5_Template,2,0,"ng-template",null,2,core.W1O)),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,2,"checkoutB2B.methodOfPayment.paymentType"),"\n"),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx.paymentTypes$)))},"CheckoutPaymentTypeComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class CheckoutPaymentTypeModule{}__name(CheckoutPaymentTypeModule,"CheckoutPaymentTypeModule"),CheckoutPaymentTypeModule.\u0275fac=__name(function(t){return new(t||CheckoutPaymentTypeModule)},"CheckoutPaymentTypeModule_Factory"),CheckoutPaymentTypeModule.\u0275mod=core.oAB({type:CheckoutPaymentTypeModule}),CheckoutPaymentTypeModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,spartacus_storefront.Fme,spartacus_core.pEA.withConfig({cmsComponents:{CheckoutPaymentType:{component:CheckoutPaymentTypeComponent,guards:[spartacus_checkout_base_components.o7,spartacus_checkout_base_components.k4,spartacus_cart_base_core.i4]}}})]});class B2BCheckoutReviewSubmitComponent extends spartacus_checkout_base_components.BG{constructor(checkoutDeliveryAddressFacade,checkoutPaymentFacade,activeCartFacade,translationService,checkoutStepService,checkoutDeliveryModesFacade,checkoutPaymentTypeFacade,checkoutCostCenterFacade,userCostCenterService){super(checkoutDeliveryAddressFacade,checkoutPaymentFacade,activeCartFacade,translationService,checkoutStepService,checkoutDeliveryModesFacade),this.checkoutDeliveryAddressFacade=checkoutDeliveryAddressFacade,this.checkoutPaymentFacade=checkoutPaymentFacade,this.activeCartFacade=activeCartFacade,this.translationService=translationService,this.checkoutStepService=checkoutStepService,this.checkoutDeliveryModesFacade=checkoutDeliveryModesFacade,this.checkoutPaymentTypeFacade=checkoutPaymentTypeFacade,this.checkoutCostCenterFacade=checkoutCostCenterFacade,this.userCostCenterService=userCostCenterService,this.checkoutStepTypePaymentType="paymentType"}get poNumber$(){return this.checkoutPaymentTypeFacade.getPurchaseOrderNumberState().pipe((0,filter.h)(state=>!state.loading&&!state.error),(0,map.U)(state=>state.data))}get paymentType$(){return this.checkoutPaymentTypeFacade.getSelectedPaymentTypeState().pipe((0,filter.h)(state=>!state.loading&&!state.error),(0,map.U)(state=>state.data))}get isAccountPayment$(){return this.checkoutPaymentTypeFacade.isAccountPayment()}get costCenter$(){return this.checkoutCostCenterFacade.getCostCenterState().pipe((0,filter.h)(state=>!state.loading&&!state.error),(0,map.U)(state=>state.data))}getCheckoutPaymentSteps(){return["paymentDetails","paymentType","deliveryAddress"]}getCostCenterCard(costCenter){return(0,combineLatest.aj)([this.translationService.translate("checkoutB2B.costCenter")]).pipe((0,map.U)(([textTitle])=>{var _a;return{title:textTitle,textBold:null==costCenter?void 0:costCenter.name,text:["("+(null===(_a=null==costCenter?void 0:costCenter.unit)||void 0===_a?void 0:_a.name)+")"]}}))}getPoNumberCard(poNumber){return(0,combineLatest.aj)([this.translationService.translate("checkoutB2B.review.poNumber"),this.translationService.translate("checkoutB2B.noPoNumber")]).pipe((0,map.U)(([textTitle,noneTextTitle])=>({title:textTitle,textBold:poNumber||noneTextTitle})))}getPaymentTypeCard(paymentType){return(0,combineLatest.aj)([this.translationService.translate("checkoutB2B.progress.methodOfPayment"),this.translationService.translate("paymentTypes.paymentType_"+paymentType.code)]).pipe((0,map.U)(([textTitle,paymentTypeTranslation])=>({title:textTitle,textBold:paymentTypeTranslation})))}}__name(B2BCheckoutReviewSubmitComponent,"B2BCheckoutReviewSubmitComponent"),B2BCheckoutReviewSubmitComponent.\u0275fac=__name(function(t){return new(t||B2BCheckoutReviewSubmitComponent)(core.Y36(spartacus_checkout_base_root.ys),core.Y36(spartacus_checkout_base_root.Tx),core.Y36(spartacus_cart_base_root.bu),core.Y36(spartacus_core.D7D),core.Y36(spartacus_checkout_base_components.hF),core.Y36(spartacus_checkout_base_root.BG),core.Y36(spartacus_checkout_b2b_root.Go),core.Y36(spartacus_checkout_b2b_root.vs),core.Y36(spartacus_core.mjM))},"B2BCheckoutReviewSubmitComponent_Factory"),B2BCheckoutReviewSubmitComponent.\u0275cmp=core.Xpm({type:B2BCheckoutReviewSubmitComponent,selectors:[["cx-review-submit"]],features:[core.qOj],decls:21,vars:9,consts:[[1,"cx-review"],[1,"cx-review-title","d-none","d-lg-block","d-xl-block"],[1,"cx-review-summary","row"],[4,"ngIf"],["poNumber",""],["paymentType",""],["costCenter",""],["deliveryAddress",""],["deliveryMode",""],["paymentMethod",""],[1,"col-md-12","col-lg-6","col-xl-6","cx-review-payment-col"],[4,"ngFor","ngForOf"],[1,"col-md-12","col-lg-6","col-xl-6","cx-review-shipping-col"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],[1,"cx-review-summary-card"],[3,"content"],[1,"cx-review-summary-edit-step"],[3,"routerLink"],["aria-hidden","true",3,"type"],[3,"content",4,"ngIf"],["class","cx-review-summary-card cx-review-card-address",4,"ngIf"],[1,"cx-review-summary-card","cx-review-card-address"],[1,"cx-review-summary-card","cx-review-card-shipping"],[1,"cx-review-summary-card","cx-review-card-payment"],[1,"cx-review-cart-total","d-none","d-lg-block","d-xl-block"],[1,"cx-review-cart-heading","d-block","d-lg-none","d-xl-none"],["class","cx-review-cart-item col-md-12",4,"ngIf"],[1,"cx-review-cart-item","col-md-12"],[3,"promotions"],[3,"cxOutlet","cxOutletContext"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"div",0)(1,"h2",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",2),core.YNc(5,B2BCheckoutReviewSubmitComponent_ng_container_5_Template,5,2,"ng-container",3),core.ALo(6,"async"),core.qZA(),core.YNc(7,B2BCheckoutReviewSubmitComponent_ng_template_7_Template,9,14,"ng-template",null,4,core.W1O),core.YNc(9,B2BCheckoutReviewSubmitComponent_ng_template_9_Template,8,12,"ng-template",null,5,core.W1O),core.YNc(11,B2BCheckoutReviewSubmitComponent_ng_template_11_Template,2,3,"ng-template",null,6,core.W1O),core.YNc(13,B2BCheckoutReviewSubmitComponent_ng_template_13_Template,2,3,"ng-template",null,7,core.W1O),core.YNc(15,B2BCheckoutReviewSubmitComponent_ng_template_15_Template,8,12,"ng-template",null,8,core.W1O),core.YNc(17,B2BCheckoutReviewSubmitComponent_ng_template_17_Template,9,12,"ng-template",null,9,core.W1O),core.YNc(19,B2BCheckoutReviewSubmitComponent_ng_container_19_Template,9,13,"ng-container",3),core.ALo(20,"async"),core.qZA()),2&rf){let tmp_1_0;core.xp6(2),core.hij(" ",core.lcZ(3,3,"checkoutReview.review")," "),core.xp6(3),core.Q6J("ngIf",null==(tmp_1_0=core.lcZ(6,5,ctx.steps$))?null:tmp_1_0.slice(0,-1)),core.xp6(14),core.Q6J("ngIf",core.lcZ(20,7,ctx.cart$))}},"B2BCheckoutReviewSubmitComponent_Template"),dependencies:[common.sg,common.O5,common.tP,common.RF,common.n9,spartacus_storefront.AkF,router.yS,spartacus_storefront.fVH,spartacus_storefront.oJW,spartacus_storefront.$3S,common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class B2BCheckoutReviewSubmitModule{}__name(B2BCheckoutReviewSubmitModule,"B2BCheckoutReviewSubmitModule"),B2BCheckoutReviewSubmitModule.\u0275fac=__name(function(t){return new(t||B2BCheckoutReviewSubmitModule)},"B2BCheckoutReviewSubmitModule_Factory"),B2BCheckoutReviewSubmitModule.\u0275mod=core.oAB({type:B2BCheckoutReviewSubmitModule}),B2BCheckoutReviewSubmitModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CheckoutReviewOrder:{component:B2BCheckoutReviewSubmitComponent,guards:[spartacus_checkout_base_components.o7,spartacus_checkout_base_components.k4]}}})],imports:[common.ez,spartacus_storefront.dTQ,spartacus_core.LUR,spartacus_core.bhT,router.Bz,spartacus_storefront.k$G,spartacus_storefront.QX1,spartacus_storefront.f5$]});class CheckoutB2BAuthGuard extends spartacus_checkout_base_components.o7{constructor(authService,authRedirectService,checkoutConfigService,activeCartFacade,semanticPathService,router2,userAccountFacade,globalMessageService){super(authService,authRedirectService,checkoutConfigService,activeCartFacade,semanticPathService,router2),this.authService=authService,this.authRedirectService=authRedirectService,this.checkoutConfigService=checkoutConfigService,this.activeCartFacade=activeCartFacade,this.semanticPathService=semanticPathService,this.router=router2,this.userAccountFacade=userAccountFacade,this.globalMessageService=globalMessageService}canActivate(){return(0,combineLatest.aj)([this.authService.isUserLoggedIn(),this.activeCartFacade.isGuestCart(),this.userAccountFacade.get(),this.activeCartFacade.isStable()]).pipe((0,map.U)(([isLoggedIn,isGuestCart,user,isStable])=>({isLoggedIn,isGuestCart,user,isStable})),(0,filter.h)(data=>data.isStable),(0,filter.h)(data=>!!data.user&&data.isLoggedIn||!data.isLoggedIn),(0,map.U)(data=>data.isLoggedIn?data.user&&"roles"in data.user?this.handleUserRole(data.user):data.isLoggedIn:!!data.isGuestCart||this.handleAnonymousUser()))}handleUserRole(user){var _a;const roles=user.roles;return!(null==roles||!roles.includes(spartacus_core.KOx.CUSTOMER))||(this.globalMessageService.add({key:"checkoutB2B.invalid.accountType"},spartacus_core.xUg.MSG_TYPE_WARNING),this.router.parseUrl(null!==(_a=this.semanticPathService.get("home"))&&void 0!==_a?_a:""))}}__name(CheckoutB2BAuthGuard,"CheckoutB2BAuthGuard"),CheckoutB2BAuthGuard.\u0275fac=__name(function(t){return new(t||CheckoutB2BAuthGuard)(core.LFG(spartacus_core.e80),core.LFG(spartacus_core.FUY),core.LFG(spartacus_checkout_base_components.QY),core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_core.hCH),core.LFG(router.F0),core.LFG(spartacus_user_account_root.gf),core.LFG(spartacus_core.IWp))},"CheckoutB2BAuthGuard_Factory"),CheckoutB2BAuthGuard.\u0275prov=core.Yz7({token:CheckoutB2BAuthGuard,factory:CheckoutB2BAuthGuard.\u0275fac,providedIn:"root"});class CheckoutB2BStepsSetGuard extends spartacus_checkout_base_components.Up{constructor(checkoutStepService,routingConfigService,checkoutDeliveryAddressFacade,checkoutPaymentFacade,checkoutDeliveryModesFacade,router2,checkoutPaymentTypeFacade,checkoutCostCenterFacade){super(checkoutStepService,routingConfigService,checkoutDeliveryAddressFacade,checkoutPaymentFacade,checkoutDeliveryModesFacade,router2),this.checkoutStepService=checkoutStepService,this.routingConfigService=routingConfigService,this.checkoutDeliveryAddressFacade=checkoutDeliveryAddressFacade,this.checkoutPaymentFacade=checkoutPaymentFacade,this.checkoutDeliveryModesFacade=checkoutDeliveryModesFacade,this.router=router2,this.checkoutPaymentTypeFacade=checkoutPaymentTypeFacade,this.checkoutCostCenterFacade=checkoutCostCenterFacade}canActivate(route){let currentIndex=-1;const currentRouteUrl="/"+route.url.join("/");return(0,combineLatest.aj)([this.checkoutStepService.steps$,this.checkoutPaymentTypeFacade.isAccountPayment()]).pipe((0,tap.b)(([,isAccount])=>{this.checkoutStepService.disableEnableStep("paymentDetails",isAccount)}),(0,take.q)(1),(0,switchMap.w)(([steps,isAccount])=>{let currentStep;return currentIndex=steps.findIndex(step=>{var _a,_b;return`/${null===(_b=null===(_a=this.routingConfigService.getRouteConfig(step.routeName))||void 0===_a?void 0:_a.paths)||void 0===_b?void 0:_b[0]}`===currentRouteUrl}),currentIndex>=0&&(currentStep=steps[currentIndex]),Boolean(currentStep)?this.isB2BStepSet(steps[currentIndex-1],isAccount):((0,core.X6Q)()&&console.warn(`Missing step with route '${currentRouteUrl}' in checkout configuration or this step is disabled.`),(0,of.of)(this.getUrl("checkout")))}))}isB2BStepSet(step,isAccountPayment){if(step&&!step.disabled)switch(step.type[0]){case"paymentType":return this.isPaymentTypeSet(step);case"deliveryAddress":return this.isDeliveryAddressAndCostCenterSet(step,isAccountPayment);case"deliveryMode":return this.isDeliveryModeSet(step);case"paymentDetails":return this.isPaymentDetailsSet(step)}return(0,of.of)(!0)}isPaymentTypeSet(step){return this.checkoutPaymentTypeFacade.getSelectedPaymentTypeState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data),(0,map.U)(paymentType=>!!paymentType||this.getUrl(step.routeName)))}isDeliveryAddressAndCostCenterSet(step,isAccountPayment){return(0,combineLatest.aj)([this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data)),this.checkoutCostCenterFacade.getCostCenterState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>state.data))]).pipe((0,map.U)(([deliveryAddress,costCenter])=>isAccountPayment?!!(deliveryAddress&&Object.keys(deliveryAddress).length&&costCenter)||this.getUrl(step.routeName):!(!deliveryAddress||!Object.keys(deliveryAddress).length||void 0!==costCenter)||this.getUrl(step.routeName)))}}__name(CheckoutB2BStepsSetGuard,"CheckoutB2BStepsSetGuard"),CheckoutB2BStepsSetGuard.\u0275fac=__name(function(t){return new(t||CheckoutB2BStepsSetGuard)(core.LFG(spartacus_checkout_base_components.hF),core.LFG(spartacus_core.gGW),core.LFG(spartacus_checkout_base_root.ys),core.LFG(spartacus_checkout_base_root.Tx),core.LFG(spartacus_checkout_base_root.BG),core.LFG(router.F0),core.LFG(spartacus_checkout_b2b_root.Go),core.LFG(spartacus_checkout_b2b_root.vs))},"CheckoutB2BStepsSetGuard_Factory"),CheckoutB2BStepsSetGuard.\u0275prov=core.Yz7({token:CheckoutB2BStepsSetGuard,factory:CheckoutB2BStepsSetGuard.\u0275fac,providedIn:"root"});class CheckoutB2BComponentsModule{}__name(CheckoutB2BComponentsModule,"CheckoutB2BComponentsModule"),CheckoutB2BComponentsModule.\u0275fac=__name(function(t){return new(t||CheckoutB2BComponentsModule)},"CheckoutB2BComponentsModule_Factory"),CheckoutB2BComponentsModule.\u0275mod=core.oAB({type:CheckoutB2BComponentsModule}),CheckoutB2BComponentsModule.\u0275inj=core.cJS({providers:[{provide:spartacus_checkout_base_components.o7,useExisting:CheckoutB2BAuthGuard},{provide:spartacus_checkout_base_components.Up,useExisting:CheckoutB2BStepsSetGuard}],imports:[common.ez,CheckoutCostCenterModule,CheckoutPaymentTypeModule,B2BCheckoutDeliveryAddressModule,B2BCheckoutReviewSubmitModule]});class CheckoutCostCenterAdapter{}__name(CheckoutCostCenterAdapter,"CheckoutCostCenterAdapter");class CheckoutCostCenterConnector{constructor(adapter){this.adapter=adapter}setCostCenter(userId,cartId,costCenterId){return this.adapter.setCostCenter(userId,cartId,costCenterId)}}__name(CheckoutCostCenterConnector,"CheckoutCostCenterConnector"),CheckoutCostCenterConnector.\u0275fac=__name(function(t){return new(t||CheckoutCostCenterConnector)(core.LFG(CheckoutCostCenterAdapter))},"CheckoutCostCenterConnector_Factory"),CheckoutCostCenterConnector.\u0275prov=core.Yz7({token:CheckoutCostCenterConnector,factory:CheckoutCostCenterConnector.\u0275fac});class CheckoutPaymentTypeAdapter{}__name(CheckoutPaymentTypeAdapter,"CheckoutPaymentTypeAdapter");class CheckoutPaymentTypeConnector{constructor(adapter){this.adapter=adapter}getPaymentTypes(){return this.adapter.getPaymentTypes()}setPaymentType(userId,cartId,typeCode,purchaseOrderNumber){return this.adapter.setPaymentType(userId,cartId,typeCode,purchaseOrderNumber)}}__name(CheckoutPaymentTypeConnector,"CheckoutPaymentTypeConnector"),CheckoutPaymentTypeConnector.\u0275fac=__name(function(t){return new(t||CheckoutPaymentTypeConnector)(core.LFG(CheckoutPaymentTypeAdapter))},"CheckoutPaymentTypeConnector_Factory"),CheckoutPaymentTypeConnector.\u0275prov=core.Yz7({token:CheckoutPaymentTypeConnector,factory:CheckoutPaymentTypeConnector.\u0275fac});class CheckoutCostCenterService{constructor(activeCartFacade,userIdService,commandService,checkoutCostCenterConnector,checkoutQueryFacade,eventService){this.activeCartFacade=activeCartFacade,this.userIdService=userIdService,this.commandService=commandService,this.checkoutCostCenterConnector=checkoutCostCenterConnector,this.checkoutQueryFacade=checkoutQueryFacade,this.eventService=eventService,this.setCostCenterCommand=this.commandService.create(payload=>this.checkoutPreconditions().pipe((0,switchMap.w)(([userId,cartId])=>this.checkoutCostCenterConnector.setCostCenter(userId,cartId,payload).pipe((0,tap.b)(()=>this.eventService.dispatch({cartId,userId,code:payload},spartacus_checkout_b2b_root.Rx))))),{strategy:spartacus_core.flE.CancelPrevious})}checkoutPreconditions(){return(0,combineLatest.aj)([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe((0,take.q)(1),(0,map.U)(([userId,cartId,isGuestCart])=>{if(!userId||!cartId||userId===spartacus_core.Fds&&!isGuestCart)throw new Error("Checkout conditions not met");return[userId,cartId]}))}getCostCenterState(){return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,map.U)(state=>{var _a;return Object.assign(Object.assign({},state),{data:null===(_a=state.data)||void 0===_a?void 0:_a.costCenter})}))}setCostCenter(costCenterId){return this.setCostCenterCommand.execute(costCenterId)}}__name(CheckoutCostCenterService,"CheckoutCostCenterService"),CheckoutCostCenterService.\u0275fac=__name(function(t){return new(t||CheckoutCostCenterService)(core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_core.XBV),core.LFG(spartacus_core.VDr),core.LFG(CheckoutCostCenterConnector),core.LFG(spartacus_checkout_base_root.nh),core.LFG(spartacus_core.POd))},"CheckoutCostCenterService_Factory"),CheckoutCostCenterService.\u0275prov=core.Yz7({token:CheckoutCostCenterService,factory:CheckoutCostCenterService.\u0275fac});class CheckoutPaymentTypeService{constructor(activeCartFacade,userIdService,queryService,commandService,paymentTypeConnector,eventService,checkoutQueryFacade){this.activeCartFacade=activeCartFacade,this.userIdService=userIdService,this.queryService=queryService,this.commandService=commandService,this.paymentTypeConnector=paymentTypeConnector,this.eventService=eventService,this.checkoutQueryFacade=checkoutQueryFacade,this.paymentTypesQuery=this.queryService.create(()=>this.paymentTypeConnector.getPaymentTypes(),{reloadOn:this.getCheckoutPaymentTypesQueryReloadEvents(),resetOn:this.getCheckoutPaymentTypesQueryResetEvents()}),this.setPaymentTypeCommand=this.commandService.create(({paymentTypeCode,purchaseOrderNumber})=>this.checkoutPreconditions().pipe((0,switchMap.w)(([userId,cartId])=>this.paymentTypeConnector.setPaymentType(userId,cartId,paymentTypeCode,purchaseOrderNumber).pipe((0,tap.b)(()=>this.eventService.dispatch({userId,cartId,paymentTypeCode,purchaseOrderNumber},spartacus_checkout_b2b_root.hA))))),{strategy:spartacus_core.flE.CancelPrevious})}getCheckoutPaymentTypesQueryReloadEvents(){return[spartacus_checkout_b2b_root.JO]}getCheckoutPaymentTypesQueryResetEvents(){return[spartacus_checkout_b2b_root.H0]}checkoutPreconditions(){return(0,combineLatest.aj)([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe((0,take.q)(1),(0,map.U)(([userId,cartId,isGuestCart])=>{if(!userId||!cartId||userId===spartacus_core.Fds&&!isGuestCart)throw new Error("Checkout conditions not met");return[userId,cartId]}))}getPaymentTypesState(){return this.paymentTypesQuery.getState()}getPaymentTypes(){return this.getPaymentTypesState().pipe((0,map.U)(state=>{var _a;return null!==(_a=state.data)&&void 0!==_a?_a:[]}))}setPaymentType(paymentTypeCode,purchaseOrderNumber){return this.setPaymentTypeCommand.execute({paymentTypeCode,purchaseOrderNumber})}getSelectedPaymentTypeState(){return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,map.U)(state=>{var _a;return Object.assign(Object.assign({},state),{data:null===(_a=state.data)||void 0===_a?void 0:_a.paymentType})}))}isAccountPayment(){return this.getSelectedPaymentTypeState().pipe((0,filter.h)(state=>!state.loading),(0,map.U)(state=>{var _a;return(null===(_a=state.data)||void 0===_a?void 0:_a.code)===spartacus_checkout_b2b_root.uj.ACCOUNT_PAYMENT}))}getPurchaseOrderNumberState(){return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,map.U)(state=>{var _a;return Object.assign(Object.assign({},state),{data:null===(_a=state.data)||void 0===_a?void 0:_a.purchaseOrderNumber})}))}}__name(CheckoutPaymentTypeService,"CheckoutPaymentTypeService"),CheckoutPaymentTypeService.\u0275fac=__name(function(t){return new(t||CheckoutPaymentTypeService)(core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_core.XBV),core.LFG(spartacus_core._7J),core.LFG(spartacus_core.VDr),core.LFG(CheckoutPaymentTypeConnector),core.LFG(spartacus_core.POd),core.LFG(spartacus_checkout_base_root.nh))},"CheckoutPaymentTypeService_Factory"),CheckoutPaymentTypeService.\u0275prov=core.Yz7({token:CheckoutPaymentTypeService,factory:CheckoutPaymentTypeService.\u0275fac});const facadeProviders=[CheckoutCostCenterService,{provide:spartacus_checkout_b2b_root.vs,useExisting:CheckoutCostCenterService},CheckoutPaymentTypeService,{provide:spartacus_checkout_b2b_root.Go,useExisting:CheckoutPaymentTypeService}];class CheckoutB2BCoreModule{}__name(CheckoutB2BCoreModule,"CheckoutB2BCoreModule"),CheckoutB2BCoreModule.\u0275fac=__name(function(t){return new(t||CheckoutB2BCoreModule)},"CheckoutB2BCoreModule_Factory"),CheckoutB2BCoreModule.\u0275mod=core.oAB({type:CheckoutB2BCoreModule}),CheckoutB2BCoreModule.\u0275inj=core.cJS({providers:[...facadeProviders,CheckoutCostCenterConnector,CheckoutPaymentTypeConnector]});const CHECKOUT_PAYMENT_TYPE_NORMALIZER=new core.OlP("CheckoutPaymentTypeNormalizer");var throwError=__webpack_require__(1737),catchError=__webpack_require__(7221),http=__webpack_require__(520);class OccCheckoutCostCenterAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}setCostCenter(userId,cartId,costCenterId){return this.http.put(this.getSetCartCostCenterEndpoint(userId,cartId,costCenterId),{}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),this.converter.pipeable(spartacus_cart_base_root.jK))}getSetCartCostCenterEndpoint(userId,cartId,costCenterId){return this.occEndpoints.buildUrl("setCartCostCenter",{urlParams:{userId,cartId},queryParams:{costCenterId}})}}__name(OccCheckoutCostCenterAdapter,"OccCheckoutCostCenterAdapter"),OccCheckoutCostCenterAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutCostCenterAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutCostCenterAdapter_Factory"),OccCheckoutCostCenterAdapter.\u0275prov=core.Yz7({token:OccCheckoutCostCenterAdapter,factory:OccCheckoutCostCenterAdapter.\u0275fac});class OccCheckoutPaymentTypeAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}getPaymentTypes(){return this.http.get(this.getPaymentTypesEndpoint()).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),(0,map.U)(paymentTypeList=>{var _a;return null!==(_a=paymentTypeList.paymentTypes)&&void 0!==_a?_a:[]}),this.converter.pipeableMany(CHECKOUT_PAYMENT_TYPE_NORMALIZER))}getPaymentTypesEndpoint(){return this.occEndpoints.buildUrl("paymentTypes")}setPaymentType(userId,cartId,paymentType,purchaseOrderNumber){return this.http.put(this.getSetCartPaymentTypeEndpoint(userId,cartId,paymentType,purchaseOrderNumber),{}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),this.converter.pipeable(spartacus_cart_base_root.jK))}getSetCartPaymentTypeEndpoint(userId,cartId,paymentType,purchaseOrderNumber){const queryParams={paymentType,purchaseOrderNumber};return this.occEndpoints.buildUrl("setCartPaymentType",{urlParams:{userId,cartId},queryParams})}}__name(OccCheckoutPaymentTypeAdapter,"OccCheckoutPaymentTypeAdapter"),OccCheckoutPaymentTypeAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutPaymentTypeAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutPaymentTypeAdapter_Factory"),OccCheckoutPaymentTypeAdapter.\u0275prov=core.Yz7({token:OccCheckoutPaymentTypeAdapter,factory:OccCheckoutPaymentTypeAdapter.\u0275fac});const defaultOccCheckoutB2BConfig={backend:{occ:{endpoints:Object.assign(Object.assign({},{getCheckoutDetails:"users/${userId}/carts/${cartId}?fields=deliveryAddress(FULL),deliveryMode(FULL),paymentInfo(FULL),costCenter(FULL),purchaseOrderNumber,paymentType(FULL)"}),{setDeliveryAddress:"orgUsers/${userId}/carts/${cartId}/addresses/delivery",paymentTypes:"paymenttypes",setCartCostCenter:"users/${userId}/carts/${cartId}/costcenter",setCartPaymentType:"users/${userId}/carts/${cartId}/paymenttype"})}}};class CheckoutB2BOccModule{}__name(CheckoutB2BOccModule,"CheckoutB2BOccModule"),CheckoutB2BOccModule.\u0275fac=__name(function(t){return new(t||CheckoutB2BOccModule)},"CheckoutB2BOccModule_Factory"),CheckoutB2BOccModule.\u0275mod=core.oAB({type:CheckoutB2BOccModule}),CheckoutB2BOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultOccCheckoutB2BConfig),{provide:CheckoutPaymentTypeAdapter,useClass:OccCheckoutPaymentTypeAdapter},{provide:CheckoutCostCenterAdapter,useClass:OccCheckoutCostCenterAdapter}],imports:[common.ez]});class CheckoutB2BModule{}__name(CheckoutB2BModule,"CheckoutB2BModule"),CheckoutB2BModule.\u0275fac=__name(function(t){return new(t||CheckoutB2BModule)},"CheckoutB2BModule_Factory"),CheckoutB2BModule.\u0275mod=core.oAB({type:CheckoutB2BModule}),CheckoutB2BModule.\u0275inj=core.cJS({imports:[CheckoutB2BComponentsModule,CheckoutB2BCoreModule,CheckoutB2BOccModule]});var spartacus_checkout_base_core=__webpack_require__(1056),pluck=__webpack_require__(373),mergeMap=__webpack_require__(1709);class OccCheckoutDeliveryAddressAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}createAddress(userId,cartId,address){return address=this.converter.convert(address,spartacus_core.O9k),this.http.post(this.getCreateDeliveryAddressEndpoint(userId,cartId),address,{headers:(new http.WM).set("Content-Type","application/json")}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),this.converter.pipeable(spartacus_core.jo8))}getCreateDeliveryAddressEndpoint(userId,cartId){return this.occEndpoints.buildUrl("createDeliveryAddress",{urlParams:{userId,cartId}})}setAddress(userId,cartId,addressId){return this.http.put(this.getSetDeliveryAddressEndpoint(userId,cartId,addressId),{}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getSetDeliveryAddressEndpoint(userId,cartId,addressId){return this.occEndpoints.buildUrl("setDeliveryAddress",{urlParams:{userId,cartId},queryParams:{addressId}})}clearCheckoutDeliveryAddress(userId,cartId){return this.http.delete(this.getRemoveDeliveryAddressEndpoint(userId,cartId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getRemoveDeliveryAddressEndpoint(userId,cartId){return this.occEndpoints.buildUrl("removeDeliveryAddress",{urlParams:{userId,cartId}})}}__name(OccCheckoutDeliveryAddressAdapter,"OccCheckoutDeliveryAddressAdapter"),OccCheckoutDeliveryAddressAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutDeliveryAddressAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutDeliveryAddressAdapter_Factory"),OccCheckoutDeliveryAddressAdapter.\u0275prov=core.Yz7({token:OccCheckoutDeliveryAddressAdapter,factory:OccCheckoutDeliveryAddressAdapter.\u0275fac});class OccCheckoutDeliveryModesAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}setMode(userId,cartId,deliveryModeId){return this.http.put(this.getSetDeliveryModeEndpoint(userId,cartId,deliveryModeId),{}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getSetDeliveryModeEndpoint(userId,cartId,deliveryModeId){return this.occEndpoints.buildUrl("setDeliveryMode",{urlParams:{userId,cartId},queryParams:{deliveryModeId}})}getSupportedModes(userId,cartId){return this.http.get(this.getDeliveryModesEndpoint(userId,cartId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),(0,pluck.j)("deliveryModes"),(0,map.U)(modes=>null!=modes?modes:[]),this.converter.pipeableMany(spartacus_checkout_base_core.Vm))}getDeliveryModesEndpoint(userId,cartId){return this.occEndpoints.buildUrl("deliveryModes",{urlParams:{userId,cartId}})}clearCheckoutDeliveryMode(userId,cartId){return this.http.delete(this.getClearDeliveryModeEndpoint(userId,cartId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getClearDeliveryModeEndpoint(userId,cartId){return this.occEndpoints.buildUrl("clearDeliveryMode",{urlParams:{userId,cartId}})}}__name(OccCheckoutDeliveryModesAdapter,"OccCheckoutDeliveryModesAdapter"),OccCheckoutDeliveryModesAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutDeliveryModesAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutDeliveryModesAdapter_Factory"),OccCheckoutDeliveryModesAdapter.\u0275prov=core.Yz7({token:OccCheckoutDeliveryModesAdapter,factory:OccCheckoutDeliveryModesAdapter.\u0275fac});class OccCheckoutPaymentAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter,"undefined"!=typeof DOMParser&&(this.domparser=new DOMParser)}createPaymentDetails(userId,cartId,paymentDetails){return paymentDetails=this.converter.convert(paymentDetails,spartacus_checkout_base_core.CZ),this.getProviderSubInfo(userId,cartId).pipe((0,map.U)(data=>{const labelsMap=this.convertToMap(data.mappingLabels.entry);return{url:data.postUrl,parameters:this.getParamsForPaymentProvider(paymentDetails,data.parameters.entry,labelsMap),mappingLabels:labelsMap}}),(0,mergeMap.zg)(sub=>this.createSubWithProvider(sub.url,sub.parameters).pipe((0,map.U)(response=>this.extractPaymentDetailsFromHtml(response)),(0,mergeMap.zg)(fromPaymentProvider=>{var _a;return fromPaymentProvider.defaultPayment=null!==(_a=paymentDetails.defaultPayment)&&void 0!==_a&&_a,fromPaymentProvider.savePaymentInfo=!0,this.createDetailsWithParameters(userId,cartId,fromPaymentProvider).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),this.converter.pipeable(spartacus_core.EM5))}))))}setPaymentDetails(userId,cartId,paymentDetailsId){return this.http.put(this.getSetPaymentDetailsEndpoint(userId,cartId,paymentDetailsId),{}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getSetPaymentDetailsEndpoint(userId,cartId,paymentDetailsId){return this.occEndpoints.buildUrl("setCartPaymentDetails",{urlParams:{userId,cartId},queryParams:{paymentDetailsId}})}getPaymentCardTypes(){return this.http.get(this.getPaymentCardTypesEndpoint()).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),(0,map.U)(cardTypeList=>{var _a;return null!==(_a=cardTypeList.cardTypes)&&void 0!==_a?_a:[]}),this.converter.pipeableMany(spartacus_checkout_base_core.iI))}getPaymentCardTypesEndpoint(){return this.occEndpoints.buildUrl("cardTypes")}getProviderSubInfo(userId,cartId){return this.http.get(this.getPaymentProviderSubInfoEndpoint(userId,cartId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getPaymentProviderSubInfoEndpoint(userId,cartId){return this.occEndpoints.buildUrl("paymentProviderSubInfo",{urlParams:{userId,cartId}})}createSubWithProvider(postUrl,parameters){const headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded",Accept:"text/html"});let httpParams=new http.LE({encoder:new spartacus_core.qug});return Object.keys(parameters).forEach(key=>{httpParams=httpParams.append(key,parameters[key])}),this.http.post(postUrl,httpParams,{headers,responseType:"text"}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}createDetailsWithParameters(userId,cartId,parameters){let httpParams=new http.LE({encoder:new spartacus_core.qug});Object.keys(parameters).forEach(key=>{httpParams=httpParams.append(key,parameters[key])});const headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(this.getCreatePaymentDetailsEndpoint(userId,cartId),httpParams,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}))}getCreatePaymentDetailsEndpoint(userId,cartId){return this.occEndpoints.buildUrl("createPaymentDetails",{urlParams:{userId,cartId}})}getParamsForPaymentProvider(paymentDetails,parameters,mappingLabels){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;const params=this.convertToMap(parameters);return params[mappingLabels.hybris_account_holder_name]=paymentDetails.accountHolderName,params[mappingLabels.hybris_card_type]=null===(_a=paymentDetails.cardType)||void 0===_a?void 0:_a.code,params[mappingLabels.hybris_card_number]=paymentDetails.cardNumber,"true"===mappingLabels.hybris_combined_expiry_date?params[mappingLabels.hybris_card_expiry_date]=paymentDetails.expiryMonth+mappingLabels.hybris_separator_expiry_date+paymentDetails.expiryYear:(params[mappingLabels.hybris_card_expiration_month]=paymentDetails.expiryMonth,params[mappingLabels.hybris_card_expiration_year]=paymentDetails.expiryYear),params[mappingLabels.hybris_card_cvn]=paymentDetails.cvn,params[mappingLabels.hybris_billTo_country]=null===(_c=null===(_b=paymentDetails.billingAddress)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.isocode,params[mappingLabels.hybris_billTo_firstname]=null===(_d=paymentDetails.billingAddress)||void 0===_d?void 0:_d.firstName,params[mappingLabels.hybris_billTo_lastname]=null===(_e=paymentDetails.billingAddress)||void 0===_e?void 0:_e.lastName,params[mappingLabels.hybris_billTo_street1]=(null===(_f=paymentDetails.billingAddress)||void 0===_f?void 0:_f.line1)+" "+(null===(_g=paymentDetails.billingAddress)||void 0===_g?void 0:_g.line2),params[mappingLabels.hybris_billTo_city]=null===(_h=paymentDetails.billingAddress)||void 0===_h?void 0:_h.town,null!==(_j=paymentDetails.billingAddress)&&void 0!==_j&&_j.region?params[mappingLabels.hybris_billTo_region]=paymentDetails.billingAddress.region.isocodeShort:params[mappingLabels.hybris_billTo_region]="",params[mappingLabels.hybris_billTo_postalcode]=null===(_k=paymentDetails.billingAddress)||void 0===_k?void 0:_k.postalCode,params}extractPaymentDetailsFromHtml(html){const inputs=this.domparser.parseFromString(html,"text/xml").getElementsByTagName("form")[0].getElementsByTagName("input"),values={};for(let i=0;inputs[i];i++){const input=inputs[i],name=input.getAttribute("name"),value=input.getAttribute("value");name&&"{}"!==name&&value&&""!==value&&(values[name]=value)}return values}convertToMap(paramList){return paramList.reduce(function(result,item){return result[item.key]=item.value,result},{})}}__name(OccCheckoutPaymentAdapter,"OccCheckoutPaymentAdapter"),OccCheckoutPaymentAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutPaymentAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutPaymentAdapter_Factory"),OccCheckoutPaymentAdapter.\u0275prov=core.Yz7({token:OccCheckoutPaymentAdapter,factory:OccCheckoutPaymentAdapter.\u0275fac});class OccCheckoutAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}getCheckoutDetails(userId,cartId){return this.http.get(this.getGetCheckoutDetailsEndpoint(userId,cartId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,spartacus_core.twT)({shouldRetry:spartacus_core.Pzz}),this.converter.pipeable(spartacus_checkout_base_core.IQ))}getGetCheckoutDetailsEndpoint(userId,cartId){return this.occEndpoints.buildUrl("getCheckoutDetails",{urlParams:{userId,cartId}})}}__name(OccCheckoutAdapter,"OccCheckoutAdapter"),OccCheckoutAdapter.\u0275fac=__name(function(t){return new(t||OccCheckoutAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCheckoutAdapter_Factory"),OccCheckoutAdapter.\u0275prov=core.Yz7({token:OccCheckoutAdapter,factory:OccCheckoutAdapter.\u0275fac});class CheckoutOccModule{}__name(CheckoutOccModule,"CheckoutOccModule"),CheckoutOccModule.\u0275fac=__name(function(t){return new(t||CheckoutOccModule)},"CheckoutOccModule_Factory"),CheckoutOccModule.\u0275mod=core.oAB({type:CheckoutOccModule}),CheckoutOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{setDeliveryAddress:"users/${userId}/carts/${cartId}/addresses/delivery",cardTypes:"cardtypes",createDeliveryAddress:"users/${userId}/carts/${cartId}/addresses/delivery",removeDeliveryAddress:"users/${userId}/carts/${cartId}/addresses/delivery",deliveryMode:"users/${userId}/carts/${cartId}/deliverymode",setDeliveryMode:"users/${userId}/carts/${cartId}/deliverymode",clearDeliveryMode:"users/${userId}/carts/${cartId}/deliverymode",deliveryModes:"users/${userId}/carts/${cartId}/deliverymodes",setCartPaymentDetails:"users/${userId}/carts/${cartId}/paymentdetails",paymentProviderSubInfo:"users/${userId}/carts/${cartId}/payment/sop/request?responseUrl=sampleUrl",createPaymentDetails:"users/${userId}/carts/${cartId}/payment/sop/response",getCheckoutDetails:"users/${userId}/carts/${cartId}?fields=deliveryAddress(FULL),deliveryMode(FULL),paymentInfo(FULL)"}}}}),{provide:spartacus_checkout_base_core.CQ,useClass:OccCheckoutAdapter},{provide:spartacus_checkout_base_core.oH,useClass:OccCheckoutDeliveryAddressAdapter},{provide:spartacus_checkout_base_core.hX,useClass:OccCheckoutDeliveryModesAdapter},{provide:spartacus_checkout_base_core.OW,useClass:OccCheckoutPaymentAdapter}],imports:[common.ez]});class CheckoutModule{}__name(CheckoutModule,"CheckoutModule"),CheckoutModule.\u0275fac=__name(function(t){return new(t||CheckoutModule)},"CheckoutModule_Factory"),CheckoutModule.\u0275mod=core.oAB({type:CheckoutModule}),CheckoutModule.\u0275inj=core.cJS({imports:[spartacus_checkout_base_components.D6,spartacus_checkout_base_core.Z_,CheckoutOccModule]});class CheckoutWrapperModule{}__name(CheckoutWrapperModule,"CheckoutWrapperModule"),CheckoutWrapperModule.\u0275fac=__name(function(t){return new(t||CheckoutWrapperModule)},"CheckoutWrapperModule_Factory"),CheckoutWrapperModule.\u0275mod=core.oAB({type:CheckoutWrapperModule}),CheckoutWrapperModule.\u0275inj=core.cJS({imports:[CheckoutModule,CheckoutB2BModule]})}};