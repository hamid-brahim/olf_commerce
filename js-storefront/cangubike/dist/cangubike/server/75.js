"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=75,exports.ids=[75],exports.modules={6075:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{QuickOrderModule:()=>QuickOrderModule});var core=__webpack_require__(5e3),fesm2015_forms=__webpack_require__(3075),spartacus_cart_base_root=__webpack_require__(8374),spartacus_core=__webpack_require__(5945),Subscription=__webpack_require__(2654),merge=__webpack_require__(6787),of=__webpack_require__(1086),combineLatest=__webpack_require__(6053),BehaviorSubject=__webpack_require__(591),map=__webpack_require__(4850),first=__webpack_require__(7224),switchMap=__webpack_require__(7545),filter=__webpack_require__(2198),tap=__webpack_require__(2994),catchError=__webpack_require__(7221),mergeAll=__webpack_require__(9146),take=__webpack_require__(2986),distinctUntilChanged=__webpack_require__(5778),debounceTime=__webpack_require__(13),common=__webpack_require__(9808),spartacus_storefront=__webpack_require__(8807),spartacus_cart_quick_order_root=__webpack_require__(91),router=__webpack_require__(9516),Subject=__webpack_require__(8929),timer=__webpack_require__(8723);class QuickOrderService{constructor(activeCartService,config,eventService,productSearchConnector){var _a,_b;this.activeCartService=activeCartService,this.config=config,this.eventService=eventService,this.productSearchConnector=productSearchConnector,this.productAdded$=new Subject.xQ,this.entries$=new BehaviorSubject.X([]),this.softDeletedEntries$=new BehaviorSubject.X({}),this.nonPurchasableProductError$=new BehaviorSubject.X(null),this.hardDeleteTimeout=(null===(_b=null===(_a=this.config.quickOrder)||void 0===_a?void 0:_a.list)||void 0===_b?void 0:_b.hardDeleteTimeout)||7e3,this.quickOrderListLimit=0,this.clearDeleteTimeouts={}}ngOnDestroy(){this.clearDeletedEntries()}getEntries(){return this.entries$}searchProducts(query,maxProducts){var _a,_b;if(this.productSearchConnector){const searchConfig={pageSize:maxProducts||(null===(_b=null===(_a=spartacus_cart_quick_order_root.Jb.quickOrder)||void 0===_a?void 0:_a.searchForm)||void 0===_b?void 0:_b.maxProducts)};return this.productSearchConnector.search(query,searchConfig).pipe((0,map.U)(searchPage=>searchPage.products||[]))}return(0,of.of)([])}clearList(){this.entries$.next([])}canAdd(code){return code?(0,of.of)(this.isProductOnTheList(code)||!this.isLimitExceeded()):(0,of.of)(!this.isLimitExceeded())}setListLimit(limit){this.quickOrderListLimit=limit}loadEntries(entries=[]){this.entries$.next(entries)}updateEntryQuantity(entryIndex,quantity){const entries=this.entries$.getValue()||[];entries[entryIndex].quantity=quantity,this.entries$.next(entries)}softDeleteEntry(index){this.entries$.pipe((0,take.q)(1)).subscribe(entries=>{const entriesList=entries;this.addSoftEntryDeletion(entriesList[index],!0),entriesList.splice(index,1),this.entries$.next(entriesList)})}addProduct(product,quantity=1){const entry=this.generateOrderEntry(product,quantity);this.addEntry(entry)}getProductAdded(){return this.productAdded$}setProductAdded(productCode){this.productAdded$.next(productCode)}addToCart(){let entries=[];const events=[],subscription=this.eventService.get(spartacus_cart_base_root.VD).subscribe(cartEvent=>{(0===cartEvent.quantityAdded||cartEvent.quantityAdded&&cartEvent.quantityAdded<cartEvent.quantity)&&events.push(this.createQuickOrderResultEvent(cartEvent))});return subscription.add(this.eventService.get(spartacus_cart_base_root.K$).subscribe(cartEvent=>{events.push(this.createQuickOrderResultEvent(cartEvent))})),this.getEntries().pipe((0,first.P)(),(0,switchMap.w)(elements=>(entries=elements,this.activeCartService.addEntries(elements),this.clearList(),this.activeCartService.isStable())),(0,filter.h)(isStable=>isStable),(0,map.U)(()=>[entries,events]),(0,tap.b)(()=>subscription.unsubscribe()))}getSoftDeletedEntries(){return this.softDeletedEntries$}restoreSoftDeletedEntry(productCode){const entry=this.getSoftDeletedEntry(productCode);this.addEntry(entry),this.hardDeleteEntry(productCode)}hardDeleteEntry(productCode){const entry=this.getSoftDeletedEntry(productCode),deletedEntries=this.softDeletedEntries$.getValue();entry&&(delete deletedEntries[productCode],this.softDeletedEntries$.next(deletedEntries)),this.clearDeleteTimeout(productCode)}clearDeletedEntries(){Object.values(this.clearDeleteTimeouts).forEach(subscription=>subscription.unsubscribe()),this.softDeletedEntries$.next({}),this.clearDeleteTimeouts={}}getNonPurchasableProductError(){return this.nonPurchasableProductError$}setNonPurchasableProductError(product){this.nonPurchasableProductError$.next(product)}clearNonPurchasableProductError(){this.nonPurchasableProductError$.next(null)}addSoftEntryDeletion(entry,clearTimeout=!0){var _a;const deletedEntries=this.softDeletedEntries$.getValue(),productCode=null===(_a=null==entry?void 0:entry.product)||void 0===_a?void 0:_a.code;if(productCode&&(deletedEntries[productCode]=entry,this.softDeletedEntries$.next(deletedEntries),clearTimeout)){const subscription=(0,timer.H)(this.hardDeleteTimeout).subscribe(()=>{this.hardDeleteEntry(productCode)});this.clearDeleteTimeouts[productCode]=subscription}}getSoftDeletedEntry(productCode){return this.softDeletedEntries$.getValue()[productCode]}generateOrderEntry(product,quantity){return{basePrice:product.price,product,quantity,totalPrice:product.price}}addEntry(entry){var _a,_b,_c,_d,_e;if((null===(_a=null==entry?void 0:entry.product)||void 0===_a?void 0:_a.code)&&!this.isProductOnTheList(entry.product.code)&&this.isLimitExceeded())return;const entries=this.entries$.getValue()||[],entryStockLevel=null===(_c=null===(_b=entry.product)||void 0===_b?void 0:_b.stock)||void 0===_c?void 0:_c.stockLevel;if(entryStockLevel&&entry.quantity&&entry.quantity>entryStockLevel&&(entry.quantity=entryStockLevel),(null===(_d=entry.product)||void 0===_d?void 0:_d.code)&&this.isProductOnTheList(entry.product.code)){const entryIndex=entries.findIndex(item=>{var _a2,_b2;return(null===(_a2=item.product)||void 0===_a2?void 0:_a2.code)===(null===(_b2=entry.product)||void 0===_b2?void 0:_b2.code)}),quantity=entries[entryIndex].quantity;if(quantity&&entry.quantity){entries[entryIndex].quantity=quantity+(null==entry?void 0:entry.quantity);const newQuantity=entries[entryIndex].quantity;newQuantity&&entryStockLevel&&newQuantity>entryStockLevel&&(entries[entryIndex].quantity=entryStockLevel),this.entries$.next([...entries])}}else this.entries$.next([...entries,entry]);this.productAdded$.next(null===(_e=entry.product)||void 0===_e?void 0:_e.code)}isProductOnTheList(productCode){return!!(this.entries$.getValue()||[]).find(item=>{var _a;return(null===(_a=item.product)||void 0===_a?void 0:_a.code)===productCode})}isLimitExceeded(){return(this.entries$.getValue()||[]).length>=this.quickOrderListLimit}createQuickOrderResultEvent(cartEvent){var _a,_b,_c;const evt={productCode:cartEvent.productCode,quantity:cartEvent.quantity};if("entry"in cartEvent&&(evt.entry=cartEvent.entry),"quantityAdded"in cartEvent&&(evt.quantityAdded=cartEvent.quantityAdded),"error"in cartEvent&&cartEvent.error instanceof spartacus_core.YPQ&&(evt.error=cartEvent.error),null!==(_b=null===(_a=evt.error)||void 0===_a?void 0:_a.details)&&void 0!==_b&&_b.length){const isOutOfStock=null===(_c=evt.error)||void 0===_c?void 0:_c.details.some(e=>"InsufficientStockError"===e.type);evt.quantityAdded=isOutOfStock?0:evt.quantity}return evt}clearDeleteTimeout(productCode){const clearMessageTimout=this.clearDeleteTimeouts[productCode];clearMessageTimout&&(clearMessageTimout.unsubscribe(),delete this.clearDeleteTimeouts[productCode])}}__name(QuickOrderService,"QuickOrderService"),QuickOrderService.\u0275fac=__name(function(t){return new(t||QuickOrderService)(core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_core.DeH),core.LFG(spartacus_core.POd),core.LFG(spartacus_core.tyF))},"QuickOrderService_Factory"),QuickOrderService.\u0275prov=core.Yz7({token:QuickOrderService,factory:QuickOrderService.\u0275fac});const facadeProviders=[QuickOrderService,{provide:spartacus_cart_quick_order_root.be,useExisting:QuickOrderService}];class QuickOrderStatePersistenceService{constructor(quickOrderService,siteContextParamsService,statePersistenceService){this.quickOrderService=quickOrderService,this.siteContextParamsService=siteContextParamsService,this.statePersistenceService=statePersistenceService,this.subscription=new Subscription.w,this.key="quick-order"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.quickOrderService.getEntries(),context$:this.siteContextParamsService.getValues([spartacus_core.iEg]),storageType:spartacus_core.iHd.SESSION_STORAGE,onRead:state=>this.onRead(state)}))}onRead(state){state&&this.quickOrderService.loadEntries(state)}ngOnDestroy(){this.subscription.unsubscribe()}}__name(QuickOrderStatePersistenceService,"QuickOrderStatePersistenceService"),QuickOrderStatePersistenceService.\u0275fac=__name(function(t){return new(t||QuickOrderStatePersistenceService)(core.LFG(spartacus_cart_quick_order_root.be),core.LFG(spartacus_core.Qnj),core.LFG(spartacus_core.WBb))},"QuickOrderStatePersistenceService_Factory"),QuickOrderStatePersistenceService.\u0275prov=core.Yz7({token:QuickOrderStatePersistenceService,factory:QuickOrderStatePersistenceService.\u0275fac,providedIn:"root"});class QuickOrderCoreModule{static forRoot(){return{ngModule:QuickOrderCoreModule}}}function CartQuickOrderFormComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.ynx(0),core.TgZ(1,"div",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",2)(5,"form",3),core.NdJ("ngSubmit",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.applyQuickOrder())},"CartQuickOrderFormComponent_ng_container_0_Template_form_ngSubmit_5_listener")),core.TgZ(6,"div",4)(7,"span",5)(8,"label",6),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core._UZ(11,"input",7),core.ALo(12,"cxTranslate"),core.ALo(13,"cxTranslate"),core.qZA(),core.TgZ(14,"span",8)(15,"label",6),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA(),core._UZ(18,"input",9),core.ALo(19,"cxTranslate"),core.qZA(),core.TgZ(20,"button",10),core.ALo(21,"async"),core.ALo(22,"cxTranslate"),core.ALo(23,"async"),core._uU(24),core.ALo(25,"cxTranslate"),core.qZA(),core._UZ(26,"cx-form-errors",11)(27,"cx-form-errors",11),core.qZA()()(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(2),core.hij(" ",core.lcZ(3,14,"quickOrderCartForm.title")," "),core.xp6(3),core.Q6J("formGroup",ctx_r0.quickOrderForm),core.xp6(4),core.hij(" ",core.lcZ(10,16,"quickOrderCartForm.productCodeLabel")," "),core.xp6(2),core.s9C("placeholder",core.lcZ(13,20,"quickOrderCartForm.productCodePlaceholder")),core.uIk("aria-label",core.lcZ(12,18,"quickOrderCartForm.entryProductCode")),core.xp6(5),core.hij(" ",core.lcZ(17,22,"quickOrderCartForm.quantityLabel")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(19,24,"quickOrderCartForm.quantity")),core.xp6(2),core.ekj("disabled",core.lcZ(21,26,ctx_r0.cartIsLoading$)),core.Q6J("disabled",core.lcZ(23,30,ctx_r0.cartIsLoading$)),core.uIk("aria-label",core.lcZ(22,28,"quickOrderCartForm.addToCart")),core.xp6(4),core.hij(" ",core.lcZ(25,32,"quickOrderCartForm.add")," "),core.xp6(2),core.Q6J("control",ctx_r0.quickOrderForm.get("productCode")),core.xp6(1),core.Q6J("control",ctx_r0.quickOrderForm.get("quantity"))}}__name(QuickOrderCoreModule,"QuickOrderCoreModule"),QuickOrderCoreModule.\u0275fac=__name(function(t){return new(t||QuickOrderCoreModule)},"QuickOrderCoreModule_Factory"),QuickOrderCoreModule.\u0275mod=core.oAB({type:QuickOrderCoreModule}),QuickOrderCoreModule.\u0275inj=core.cJS({providers:[...facadeProviders,QuickOrderStatePersistenceService]}),__name(CartQuickOrderFormComponent_ng_container_0_Template,"CartQuickOrderFormComponent_ng_container_0_Template");const _c0=__name(function(a0){return{limit:a0}},"_c0");function QuickOrderFormComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"input",7),core.NdJ("blur",__name(function($event){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.onBlur($event))},"QuickOrderFormComponent_ng_container_3_Template_input_blur_1_listener"))("focus",__name(function(){core.CHM(_r9);const ctx_r10=core.oxw();return core.KtG(ctx_r10.open())},"QuickOrderFormComponent_ng_container_3_Template_input_focus_1_listener"))("keydown.arrowdown",__name(function($event){core.CHM(_r9);const ctx_r11=core.oxw();return core.KtG(ctx_r11.focusNextChild($event))},"QuickOrderFormComponent_ng_container_3_Template_input_keydown_arrowdown_1_listener"))("keydown.arrowup",__name(function($event){core.CHM(_r9);const ctx_r12=core.oxw();return core.KtG(ctx_r12.focusPreviousChild($event))},"QuickOrderFormComponent_ng_container_3_Template_input_keydown_arrowup_1_listener"))("keydown.enter",__name(function($event){core.CHM(_r9);const ctx_r13=core.oxw();return core.KtG(ctx_r13.addProduct($event))},"QuickOrderFormComponent_ng_container_3_Template_input_keydown_enter_1_listener"))("keydown.escape",__name(function($event){core.CHM(_r9);const ctx_r14=core.oxw();return core.KtG(ctx_r14.clear($event))},"QuickOrderFormComponent_ng_container_3_Template_input_keydown_escape_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.s9C("placeholder",core.lcZ(3,5,"quickOrderForm.placeholder")),core.uIk("aria-label",core.xi3(2,2,"quickOrderForm.searchBoxLabel",core.VKq(7,_c0,ctx_r0.limit)))}}function QuickOrderFormComponent_ng_container_4_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.ynx(0),core.TgZ(1,"input",8),core.NdJ("blur",__name(function($event){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.onBlur($event))},"QuickOrderFormComponent_ng_container_4_Template_input_blur_1_listener"))("focus",__name(function(){core.CHM(_r16);const ctx_r17=core.oxw();return core.KtG(ctx_r17.open())},"QuickOrderFormComponent_ng_container_4_Template_input_focus_1_listener"))("keydown.arrowdown",__name(function($event){core.CHM(_r16);const ctx_r18=core.oxw();return core.KtG(ctx_r18.focusNextChild($event))},"QuickOrderFormComponent_ng_container_4_Template_input_keydown_arrowdown_1_listener"))("keydown.arrowup",__name(function($event){core.CHM(_r16);const ctx_r19=core.oxw();return core.KtG(ctx_r19.focusPreviousChild($event))},"QuickOrderFormComponent_ng_container_4_Template_input_keydown_arrowup_1_listener"))("keydown.enter",__name(function($event){core.CHM(_r16);const ctx_r20=core.oxw();return core.KtG(ctx_r20.addProduct($event))},"QuickOrderFormComponent_ng_container_4_Template_input_keydown_enter_1_listener"))("keydown.escape",__name(function($event){core.CHM(_r16);const ctx_r21=core.oxw();return core.KtG(ctx_r21.clear($event))},"QuickOrderFormComponent_ng_container_4_Template_input_keydown_escape_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r1=core.oxw();core.xp6(1),core.s9C("placeholder",core.lcZ(3,5,"quickOrderForm.placeholder")),core.uIk("aria-label",core.xi3(2,2,"quickOrderForm.searchBoxLabel",core.VKq(7,_c0,ctx_r1.limit)))}}function QuickOrderFormComponent_button_5_Template(rf,ctx){if(1&rf){const _r23=core.EpF();core.TgZ(0,"button",9),core.NdJ("click",__name(function($event){core.CHM(_r23);const ctx_r22=core.oxw();return core.KtG(ctx_r22.clear($event))},"QuickOrderFormComponent_button_5_Template_button_click_0_listener"))("keydown.enter",__name(function($event){core.CHM(_r23);const ctx_r24=core.oxw();return core.KtG(ctx_r24.clear($event))},"QuickOrderFormComponent_button_5_Template_button_keydown_enter_0_listener")),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",10),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.uIk("aria-label",core.lcZ(1,2,"common.reset")),core.xp6(2),core.Q6J("type",ctx_r2.iconTypes.RESET)}}function QuickOrderFormComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"button",11),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",10),core.qZA()),2&rf){const ctx_r4=core.oxw();core.uIk("aria-label",core.lcZ(1,2,"common.search")),core.xp6(2),core.Q6J("type",ctx_r4.iconTypes.SEARCH)}}function QuickOrderFormComponent_span_8_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",12),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"quickOrderForm.listLimitReached")," "))}function QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_cx_media_2_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-media",25),2&rf){const product_r29=core.oxw().$implicit;core.Q6J("alt",product_r29.name)("container",null==product_r29.images?null:product_r29.images.PRIMARY)}}__name(QuickOrderFormComponent_ng_container_3_Template,"QuickOrderFormComponent_ng_container_3_Template"),__name(QuickOrderFormComponent_ng_container_4_Template,"QuickOrderFormComponent_ng_container_4_Template"),__name(QuickOrderFormComponent_button_5_Template,"QuickOrderFormComponent_button_5_Template"),__name(QuickOrderFormComponent_ng_template_6_Template,"QuickOrderFormComponent_ng_template_6_Template"),__name(QuickOrderFormComponent_span_8_Template,"QuickOrderFormComponent_span_8_Template"),__name(QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_cx_media_2_Template,"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_cx_media_2_Template");const _c1=__name(function(a0){return{id:a0}},"_c1");function QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template(rf,ctx){if(1&rf){const _r34=core.EpF();core.TgZ(0,"li",19)(1,"button",20),core.NdJ("blur",__name(function($event){core.CHM(_r34);const ctx_r33=core.oxw(4);return core.KtG(ctx_r33.onBlur($event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_blur_1_listener"))("click",__name(function($event){const product_r29=core.CHM(_r34).$implicit,ctx_r35=core.oxw(4);return core.KtG(ctx_r35.add(product_r29,$event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_click_1_listener"))("keydown.arrowdown",__name(function($event){core.CHM(_r34);const ctx_r36=core.oxw(4);return core.KtG(ctx_r36.focusNextChild($event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_keydown_arrowdown_1_listener"))("keydown.arrowup",__name(function($event){core.CHM(_r34);const ctx_r37=core.oxw(4);return core.KtG(ctx_r37.focusPreviousChild($event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_keydown_arrowup_1_listener"))("keydown.enter",__name(function($event){const product_r29=core.CHM(_r34).$implicit,ctx_r38=core.oxw(4);return core.KtG(ctx_r38.add(product_r29,$event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_keydown_enter_1_listener"))("keydown.escape",__name(function($event){core.CHM(_r34);const ctx_r39=core.oxw(4);return core.KtG(ctx_r39.clear($event))},"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template_button_keydown_escape_1_listener")),core.YNc(2,QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_cx_media_2_Template,1,2,"cx-media",21),core._UZ(3,"div",22),core.TgZ(4,"span",23),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"span",24),core._uU(8),core.qZA()()()}if(2&rf){const product_r29=ctx.$implicit,ctx_r28=core.oxw(4);core.xp6(1),core.ekj("has-media",null==ctx_r28.config||null==ctx_r28.config.quickOrder||null==ctx_r28.config.quickOrder.searchForm?null:ctx_r28.config.quickOrder.searchForm.displayProductImages),core.xp6(1),core.Q6J("ngIf",null==ctx_r28.config||null==ctx_r28.config.quickOrder||null==ctx_r28.config.quickOrder.searchForm?null:ctx_r28.config.quickOrder.searchForm.displayProductImages),core.xp6(1),core.Q6J("innerHTML",product_r29.name,core.oJD),core.xp6(2),core.hij(" ",core.xi3(6,6,"quickOrderForm.id",core.VKq(9,_c1,product_r29.code))," "),core.xp6(3),core.Oqu(null==product_r29.price?null:product_r29.price.formattedValue)}}function QuickOrderFormComponent_ng_container_10_div_1_ul_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ul",17),core.YNc(1,QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template,9,11,"li",18),core.qZA()),2&rf){const ctx_r26=core.oxw(3);core.xp6(1),core.Q6J("ngForOf",ctx_r26.results)}}function QuickOrderFormComponent_ng_container_10_div_1_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",26),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"quickOrderForm.noResults")," "))}function QuickOrderFormComponent_ng_container_10_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",14),core.YNc(1,QuickOrderFormComponent_ng_container_10_div_1_ul_1_Template,2,1,"ul",15),core.YNc(2,QuickOrderFormComponent_ng_container_10_div_1_span_2_Template,3,3,"span",16),core.qZA()),2&rf){const ctx_r25=core.oxw(2);core.xp6(1),core.Q6J("ngIf",ctx_r25.results.length),core.xp6(1),core.Q6J("ngIf",ctx_r25.noResults)}}function QuickOrderFormComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderFormComponent_ng_container_10_div_1_Template,3,2,"div",13),core.BQk()),2&rf){const ctx_r6=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r6.isResultsBoxOpen())}}function QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_cx_media_2_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-media",25),2&rf){const product_r44=core.oxw().$implicit;core.Q6J("alt",product_r44.name)("container",null==product_r44.images?null:product_r44.images.PRIMARY)}}function QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template(rf,ctx){if(1&rf){const _r49=core.EpF();core.TgZ(0,"li",19)(1,"button",20),core.NdJ("blur",__name(function($event){core.CHM(_r49);const ctx_r48=core.oxw(4);return core.KtG(ctx_r48.onBlur($event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_blur_1_listener"))("click",__name(function($event){const product_r44=core.CHM(_r49).$implicit,ctx_r50=core.oxw(4);return core.KtG(ctx_r50.add(product_r44,$event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_click_1_listener"))("keydown.arrowdown",__name(function($event){core.CHM(_r49);const ctx_r51=core.oxw(4);return core.KtG(ctx_r51.focusNextChild($event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_keydown_arrowdown_1_listener"))("keydown.arrowup",__name(function($event){core.CHM(_r49);const ctx_r52=core.oxw(4);return core.KtG(ctx_r52.focusPreviousChild($event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_keydown_arrowup_1_listener"))("keydown.enter",__name(function($event){const product_r44=core.CHM(_r49).$implicit,ctx_r53=core.oxw(4);return core.KtG(ctx_r53.add(product_r44,$event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_keydown_enter_1_listener"))("keydown.escape",__name(function($event){core.CHM(_r49);const ctx_r54=core.oxw(4);return core.KtG(ctx_r54.clear($event))},"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template_button_keydown_escape_1_listener")),core.YNc(2,QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_cx_media_2_Template,1,2,"cx-media",21),core._UZ(3,"div",22),core.TgZ(4,"span",23),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"span",24),core._uU(8),core.qZA()()()}if(2&rf){const product_r44=ctx.$implicit,ctx_r43=core.oxw(4);core.xp6(1),core.ekj("has-media",null==ctx_r43.config||null==ctx_r43.config.quickOrder||null==ctx_r43.config.quickOrder.searchForm?null:ctx_r43.config.quickOrder.searchForm.displayProductImages),core.xp6(1),core.Q6J("ngIf",null==ctx_r43.config||null==ctx_r43.config.quickOrder||null==ctx_r43.config.quickOrder.searchForm?null:ctx_r43.config.quickOrder.searchForm.displayProductImages),core.xp6(1),core.Q6J("innerHTML",product_r44.name,core.oJD),core.xp6(2),core.hij(" ",core.xi3(6,6,"quickOrderForm.id",core.VKq(9,_c1,product_r44.code))," "),core.xp6(3),core.Oqu(null==product_r44.price?null:product_r44.price.formattedValue)}}function QuickOrderFormComponent_ng_container_11_div_1_ul_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ul",17),core.YNc(1,QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template,9,11,"li",18),core.qZA()),2&rf){const ctx_r41=core.oxw(3);core.xp6(1),core.Q6J("ngForOf",ctx_r41.results)}}function QuickOrderFormComponent_ng_container_11_div_1_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",26),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"quickOrderForm.noResults")," "))}function QuickOrderFormComponent_ng_container_11_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",28),core.YNc(1,QuickOrderFormComponent_ng_container_11_div_1_ul_1_Template,2,1,"ul",15),core.YNc(2,QuickOrderFormComponent_ng_container_11_div_1_span_2_Template,3,3,"span",16),core.qZA()),2&rf){const ctx_r40=core.oxw(2);core.xp6(1),core.Q6J("ngIf",ctx_r40.results.length),core.xp6(1),core.Q6J("ngIf",ctx_r40.noResults)}}function QuickOrderFormComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderFormComponent_ng_container_11_div_1_Template,3,2,"div",27),core.BQk()),2&rf){const ctx_r7=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r7.isResultsBoxOpen())}}__name(QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template,"QuickOrderFormComponent_ng_container_10_div_1_ul_1_li_1_Template"),__name(QuickOrderFormComponent_ng_container_10_div_1_ul_1_Template,"QuickOrderFormComponent_ng_container_10_div_1_ul_1_Template"),__name(QuickOrderFormComponent_ng_container_10_div_1_span_2_Template,"QuickOrderFormComponent_ng_container_10_div_1_span_2_Template"),__name(QuickOrderFormComponent_ng_container_10_div_1_Template,"QuickOrderFormComponent_ng_container_10_div_1_Template"),__name(QuickOrderFormComponent_ng_container_10_Template,"QuickOrderFormComponent_ng_container_10_Template"),__name(QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_cx_media_2_Template,"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_cx_media_2_Template"),__name(QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template,"QuickOrderFormComponent_ng_container_11_div_1_ul_1_li_1_Template"),__name(QuickOrderFormComponent_ng_container_11_div_1_ul_1_Template,"QuickOrderFormComponent_ng_container_11_div_1_ul_1_Template"),__name(QuickOrderFormComponent_ng_container_11_div_1_span_2_Template,"QuickOrderFormComponent_ng_container_11_div_1_span_2_Template"),__name(QuickOrderFormComponent_ng_container_11_div_1_Template,"QuickOrderFormComponent_ng_container_11_div_1_Template"),__name(QuickOrderFormComponent_ng_container_11_Template,"QuickOrderFormComponent_ng_container_11_Template");const _c2=__name(function(a0){return{count:a0}},"_c2"),_c4=__name(function(a0,a1){return{disabled:a0,"img-missing":a1}},"_c4"),_c5=__name(function(a1){return{cxRoute:"product",params:a1}},"_c5"),_c6=__name(function(a0){return{disabled:a0}},"_c6");function QuickOrderTableComponent_table_0_tr_19_Template(rf,ctx){if(1&rf&&core._UZ(0,"tr",10),2&rf){const entry_r2=ctx.$implicit,i_r3=ctx.index,ctx_r1=core.oxw(2);core.Q6J("entry",entry_r2)("index",i_r3)("loading",ctx_r1.loading)}}function QuickOrderTableComponent_table_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"table",1)(1,"caption",2),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"thead")(5,"tr",3)(6,"th",4),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA(),core.TgZ(9,"th",5),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA(),core.TgZ(12,"th",6),core._uU(13),core.ALo(14,"cxTranslate"),core.qZA(),core.TgZ(15,"th",7),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA()()(),core.TgZ(18,"tbody",8),core.YNc(19,QuickOrderTableComponent_table_0_tr_19_Template,1,3,"tr",9),core.qZA()()),2&rf){const ctx_r0=core.oxw();core.xp6(2),core.hij(" ",core.lcZ(3,6,"quickOrderTable.caption")," "),core.xp6(5),core.hij(" ",core.lcZ(8,8,"quickOrderTable.product")," "),core.xp6(3),core.hij(" ",core.lcZ(11,10,"quickOrderTable.price")," "),core.xp6(3),core.hij(" ",core.lcZ(14,12,"quickOrderTable.quantity")," "),core.xp6(3),core.hij(" ",core.lcZ(17,14,"quickOrderTable.actions")," "),core.xp6(3),core.Q6J("ngForOf",ctx_r0.entries)}}__name(QuickOrderTableComponent_table_0_tr_19_Template,"QuickOrderTableComponent_table_0_tr_19_Template"),__name(QuickOrderTableComponent_table_0_Template,"QuickOrderTableComponent_table_0_Template");const _c7=["quickOrderForm"];function QuickOrderComponent_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-message",2),core.ALo(2,"cxTranslate"),core.BQk()),2&rf){const entries_r8=core.oxw(2).ngIf,ctx_r10=core.oxw();core.xp6(1),core.Q6J("text",core.xi3(2,3,"quickOrderList.errors.listIsFull",core.VKq(6,_c2,entries_r8.length)))("isVisibleCloseButton",!1)("type",ctx_r10.globalMessageType.MSG_TYPE_ERROR)}}function QuickOrderComponent_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_1_ng_container_1_ng_container_1_Template,3,8,"ng-container",1),core.BQk()),2&rf){const ctx_r9=core.oxw(2);let tmp_0_0;core.xp6(1),core.Q6J("ngIf",null==ctx_r9.quickOrderForm||null==ctx_r9.quickOrderForm.form||null==(tmp_0_0=ctx_r9.quickOrderForm.form.get("product"))?null:tmp_0_0.dirty)}}function QuickOrderComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_1_ng_container_1_Template,2,1,"ng-container",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",!core.lcZ(2,1,ctx_r0.canAddProduct()))}}function QuickOrderComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r13=core.EpF();core.ynx(0),core.TgZ(1,"cx-message",3),core.NdJ("closeMessage",__name(function(){core.CHM(_r13);const ctx_r12=core.oxw();return core.KtG(ctx_r12.clearAddToCartInformation())},"QuickOrderComponent_ng_container_3_Template_cx_message_closeMessage_1_listener")),core.ALo(2,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("text",core.lcZ(2,2,"quickOrderList.informations.addProductBeforeAddingToCart"))("type",ctx_r1.globalMessageType.MSG_TYPE_ERROR)}}__name(QuickOrderComponent_ng_container_1_ng_container_1_ng_container_1_Template,"QuickOrderComponent_ng_container_1_ng_container_1_ng_container_1_Template"),__name(QuickOrderComponent_ng_container_1_ng_container_1_Template,"QuickOrderComponent_ng_container_1_ng_container_1_Template"),__name(QuickOrderComponent_ng_container_1_Template,"QuickOrderComponent_ng_container_1_Template"),__name(QuickOrderComponent_ng_container_3_Template,"QuickOrderComponent_ng_container_3_Template");const _c8=__name(function(a0){return{name:a0}},"_c8");function QuickOrderComponent_ng_container_5_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.ynx(0),core.TgZ(1,"cx-message",4),core.NdJ("closeMessage",__name(function(){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.clearNonPurchasableError())},"QuickOrderComponent_ng_container_5_Template_cx_message_closeMessage_1_listener")),core.ALo(2,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const nonPurchasableError_r14=ctx.ngIf,ctx_r2=core.oxw();core.xp6(1),core.Q6J("text",core.xi3(2,2,"quickOrderList.errors.nonPurchasableError",core.VKq(5,_c8,nonPurchasableError_r14.name)))("type",ctx_r2.globalMessageType.MSG_TYPE_ERROR)}}function QuickOrderComponent_ng_container_7_cx_message_1_Template(rf,ctx){if(1&rf){const _r21=core.EpF();core.TgZ(0,"cx-message",6),core.NdJ("buttonAction",__name(function(){const deletedEntry_r19=core.CHM(_r21).$implicit,ctx_r20=core.oxw(2);return core.KtG(ctx_r20.undoDeletion(deletedEntry_r19.value))},"QuickOrderComponent_ng_container_7_cx_message_1_Template_cx_message_buttonAction_0_listener"))("closeMessage",__name(function(){const deletedEntry_r19=core.CHM(_r21).$implicit,ctx_r22=core.oxw(2);return core.KtG(ctx_r22.clearDeletion(deletedEntry_r19.value))},"QuickOrderComponent_ng_container_7_cx_message_1_Template_cx_message_closeMessage_0_listener")),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const deletedEntry_r19=ctx.$implicit,ctx_r18=core.oxw(2);core.Q6J("actionButtonText",core.lcZ(1,4,"quickOrderList.undo"))("actionButtonMessage",core.xi3(2,6,"quickOrderList.revokeUndo",core.VKq(12,_c8,null==deletedEntry_r19.value.product?null:deletedEntry_r19.value.product.name)))("text",core.xi3(3,9,"quickOrderList.productWasDeleted",core.VKq(14,_c8,null==deletedEntry_r19.value.product?null:deletedEntry_r19.value.product.name)))("type",ctx_r18.globalMessageType.MSG_TYPE_CONFIRMATION)}}function QuickOrderComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_7_cx_message_1_Template,4,16,"cx-message",5),core.ALo(2,"keyvalue"),core.BQk()),2&rf){const deletedEntries_r17=ctx.ngIf;core.xp6(1),core.Q6J("ngForOf",core.lcZ(2,1,deletedEntries_r17))}}__name(QuickOrderComponent_ng_container_5_Template,"QuickOrderComponent_ng_container_5_Template"),__name(QuickOrderComponent_ng_container_7_cx_message_1_Template,"QuickOrderComponent_ng_container_7_cx_message_1_Template"),__name(QuickOrderComponent_ng_container_7_Template,"QuickOrderComponent_ng_container_7_Template");const _c9=__name(function(a0,a1){return{name:a0,code:a1}},"_c9");function QuickOrderComponent_ng_container_9_cx_message_1_li_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li",12)(1,"span"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()()),2&rf){const error_r26=ctx.$implicit;core.xp6(2),core.hij(" ",core.xi3(3,1,"quickOrderList.errors.productIsOutOfStock",core.WLB(4,_c9,error_r26.entry.product.name,error_r26.entry.product.code))," ")}}function QuickOrderComponent_ng_container_9_cx_message_1_Template(rf,ctx){if(1&rf){const _r28=core.EpF();core.TgZ(0,"cx-message",8),core.NdJ("closeMessage",__name(function(){core.CHM(_r28);const ctx_r27=core.oxw(2);return core.KtG(ctx_r27.clearErrors())},"QuickOrderComponent_ng_container_9_cx_message_1_Template_cx_message_closeMessage_0_listener")),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.TgZ(3,"ul",9),core.YNc(4,QuickOrderComponent_ng_container_9_cx_message_1_li_4_Template,4,7,"li",10),core.qZA(),core.TgZ(5,"div",11),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA()()}if(2&rf){const errors_r23=core.oxw().ngIf,ctx_r24=core.oxw();core.Q6J("accordionText",core.lcZ(1,5,"quickOrderList.errors.reviewErrors"))("text",core.lcZ(2,7,"quickOrderList.errorProceedingToCart"))("type",ctx_r24.globalMessageType.MSG_TYPE_ERROR),core.xp6(4),core.Q6J("ngForOf",errors_r23),core.xp6(2),core.hij(" ",core.xi3(7,9,"quickOrderList.errors.outOfStockErrorFound",core.VKq(12,_c2,errors_r23.length))," ")}}function QuickOrderComponent_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_9_cx_message_1_Template,8,14,"cx-message",7),core.BQk()),2&rf){const errors_r23=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",errors_r23.length)}}__name(QuickOrderComponent_ng_container_9_cx_message_1_li_4_Template,"QuickOrderComponent_ng_container_9_cx_message_1_li_4_Template"),__name(QuickOrderComponent_ng_container_9_cx_message_1_Template,"QuickOrderComponent_ng_container_9_cx_message_1_Template"),__name(QuickOrderComponent_ng_container_9_Template,"QuickOrderComponent_ng_container_9_Template");const _c10=__name(function(a0,a1,a2){return{name:a0,code:a1,quantityAdded:a2}},"_c10");function QuickOrderComponent_ng_container_11_cx_message_1_li_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li",17)(1,"span"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()()),2&rf){const warning_r33=ctx.$implicit;core.xp6(2),core.hij(" ",core.xi3(3,1,"quickOrderList.warnings.productWasReduced",core.kEZ(4,_c10,warning_r33.entry.product.name,warning_r33.entry.product.code,warning_r33.quantityAdded))," ")}}function QuickOrderComponent_ng_container_11_cx_message_1_Template(rf,ctx){if(1&rf){const _r35=core.EpF();core.TgZ(0,"cx-message",14),core.NdJ("closeMessage",__name(function(){core.CHM(_r35);const ctx_r34=core.oxw(2);return core.KtG(ctx_r34.clearWarnings())},"QuickOrderComponent_ng_container_11_cx_message_1_Template_cx_message_closeMessage_0_listener")),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.TgZ(3,"ul",15),core.YNc(4,QuickOrderComponent_ng_container_11_cx_message_1_li_4_Template,4,8,"li",16),core.qZA(),core.TgZ(5,"div",11),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA()()}if(2&rf){const warnings_r30=core.oxw().ngIf,ctx_r31=core.oxw();core.Q6J("accordionText",core.lcZ(1,5,"quickOrderList.warnings.reviewWarnings"))("text",core.lcZ(2,7,"quickOrderList.warningProceedingToCart"))("type",ctx_r31.globalMessageType.MSG_TYPE_WARNING),core.xp6(4),core.Q6J("ngForOf",warnings_r30),core.xp6(2),core.hij(" ",core.xi3(7,9,"quickOrderList.warnings.reduceWarningFound",core.VKq(12,_c2,warnings_r30.length))," ")}}function QuickOrderComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_11_cx_message_1_Template,8,14,"cx-message",13),core.BQk()),2&rf){const warnings_r30=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",warnings_r30.length)}}function QuickOrderComponent_ng_container_13_cx_message_1_li_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li",22)(1,"span"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()()),2&rf){const entry_r40=ctx.$implicit;core.xp6(2),core.Oqu(core.xi3(3,1,"quickOrderList.successes.productAddedToCart",core.WLB(4,_c9,entry_r40.product.name,entry_r40.product.code)))}}function QuickOrderComponent_ng_container_13_cx_message_1_Template(rf,ctx){if(1&rf){const _r42=core.EpF();core.TgZ(0,"cx-message",19),core.NdJ("closeMessage",__name(function(){core.CHM(_r42);const ctx_r41=core.oxw(2);return core.KtG(ctx_r41.clearSuccesses())},"QuickOrderComponent_ng_container_13_cx_message_1_Template_cx_message_closeMessage_0_listener")),core.ALo(1,"cxTranslate"),core.TgZ(2,"ul",20),core.YNc(3,QuickOrderComponent_ng_container_13_cx_message_1_li_3_Template,4,7,"li",21),core.qZA(),core.TgZ(4,"div",11),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()}if(2&rf){const successes_r37=core.oxw().ngIf,ctx_r38=core.oxw();core.Q6J("text",core.lcZ(1,4,"quickOrderList.successfullyAddedToCart"))("type",ctx_r38.globalMessageType.MSG_TYPE_CONFIRMATION),core.xp6(3),core.Q6J("ngForOf",successes_r37),core.xp6(2),core.hij(" ",core.xi3(6,6,"quickOrderList.successes.addedToCartFound",core.VKq(9,_c2,successes_r37.length))," ")}}function QuickOrderComponent_ng_container_13_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_13_cx_message_1_Template,7,11,"cx-message",18),core.BQk()),2&rf){const successes_r37=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",successes_r37.length)}}function QuickOrderComponent_ng_container_15_ng_container_1_h3_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"h3"),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"quickOrderList.header")," "))}function QuickOrderComponent_ng_container_15_ng_container_1_h2_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"h2"),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"quickOrderList.header")," "))}function QuickOrderComponent_ng_container_15_ng_container_1_button_15_Template(rf,ctx){if(1&rf){const _r52=core.EpF();core.TgZ(0,"button",34),core.NdJ("click",__name(function(){core.CHM(_r52);const ctx_r51=core.oxw(3);return core.KtG(ctx_r51.clear())},"QuickOrderComponent_ng_container_15_ng_container_1_button_15_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.ALo(2,"async"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r50=core.oxw(3);core.Q6J("disabled",!core.lcZ(2,5,ctx_r50.isCartStable$)),core.uIk("aria-label",core.lcZ(1,3,"quickOrderList.emptyList")),core.xp6(3),core.hij(" ",core.lcZ(4,7,"quickOrderList.emptyList")," ")}}function QuickOrderComponent_ng_container_15_ng_container_1_Template(rf,ctx){if(1&rf){const _r54=core.EpF();core.ynx(0),core.TgZ(1,"div",23),core.YNc(2,QuickOrderComponent_ng_container_15_ng_container_1_h3_2_Template,3,3,"h3",24),core.YNc(3,QuickOrderComponent_ng_container_15_ng_container_1_h2_3_Template,3,3,"h2",24),core.TgZ(4,"p"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.TgZ(7,"div",25),core._UZ(8,"cx-quick-order-form",26,27),core.qZA(),core.TgZ(10,"div",28),core._UZ(11,"cx-quick-order-table",29),core.ALo(12,"async"),core.qZA(),core.TgZ(13,"div",30)(14,"div",31),core.YNc(15,QuickOrderComponent_ng_container_15_ng_container_1_button_15_Template,5,9,"button",32),core.qZA(),core.TgZ(16,"div",31)(17,"cx-progress-button",33),core.NdJ("clickEvent",__name(function(){const entries_r46=core.CHM(_r54).ngIf,ctx_r53=core.oxw(2);return core.KtG(ctx_r53.addToCart(entries_r46))},"QuickOrderComponent_ng_container_15_ng_container_1_Template_cx_progress_button_clickEvent_17_listener")),core.ALo(18,"cxTranslate"),core.ALo(19,"async"),core._uU(20),core.ALo(21,"cxTranslate"),core.qZA()()(),core.BQk()}if(2&rf){const entries_r46=ctx.ngIf,quickOrderListLimit_r44=core.oxw().ngIf,ctx_r45=core.oxw();core.xp6(2),core.Q6J("cxFeatureLevel","!5.1"),core.xp6(1),core.Q6J("cxFeatureLevel","5.1"),core.xp6(2),core.hij(" ",core.xi3(6,12,"quickOrderList.subHeader",core.VKq(23,_c0,quickOrderListLimit_r44))," "),core.xp6(3),core.Q6J("limit",quickOrderListLimit_r44),core.xp6(3),core.Q6J("entries",entries_r46)("loading",!core.lcZ(12,15,ctx_r45.isCartStable$)),core.xp6(4),core.Q6J("ngIf",entries_r46.length),core.xp6(2),core.Tol("btn-block add-button"),core.Q6J("ariaLabel",core.lcZ(18,17,"quickOrderList.addToCart"))("loading",!core.lcZ(19,19,ctx_r45.isCartStable$)),core.xp6(3),core.hij(" ",core.lcZ(21,21,"quickOrderList.addToCart")," ")}}function QuickOrderComponent_ng_container_15_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,QuickOrderComponent_ng_container_15_ng_container_1_Template,22,25,"ng-container",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r7=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r7.entries$))}}__name(QuickOrderComponent_ng_container_11_cx_message_1_li_4_Template,"QuickOrderComponent_ng_container_11_cx_message_1_li_4_Template"),__name(QuickOrderComponent_ng_container_11_cx_message_1_Template,"QuickOrderComponent_ng_container_11_cx_message_1_Template"),__name(QuickOrderComponent_ng_container_11_Template,"QuickOrderComponent_ng_container_11_Template"),__name(QuickOrderComponent_ng_container_13_cx_message_1_li_3_Template,"QuickOrderComponent_ng_container_13_cx_message_1_li_3_Template"),__name(QuickOrderComponent_ng_container_13_cx_message_1_Template,"QuickOrderComponent_ng_container_13_cx_message_1_Template"),__name(QuickOrderComponent_ng_container_13_Template,"QuickOrderComponent_ng_container_13_Template"),__name(QuickOrderComponent_ng_container_15_ng_container_1_h3_2_Template,"QuickOrderComponent_ng_container_15_ng_container_1_h3_2_Template"),__name(QuickOrderComponent_ng_container_15_ng_container_1_h2_3_Template,"QuickOrderComponent_ng_container_15_ng_container_1_h2_3_Template"),__name(QuickOrderComponent_ng_container_15_ng_container_1_button_15_Template,"QuickOrderComponent_ng_container_15_ng_container_1_button_15_Template"),__name(QuickOrderComponent_ng_container_15_ng_container_1_Template,"QuickOrderComponent_ng_container_15_ng_container_1_Template"),__name(QuickOrderComponent_ng_container_15_Template,"QuickOrderComponent_ng_container_15_Template");class CartQuickOrderFormComponent{constructor(activeCartService,eventService,formBuilder,globalMessageService){this.activeCartService=activeCartService,this.eventService=eventService,this.formBuilder=formBuilder,this.globalMessageService=globalMessageService,this.cartIsLoading$=this.activeCartService.isStable().pipe((0,map.U)(loaded=>!loaded)),this.cart$=this.activeCartService.getActive(),this.min=1,this.subscription=new Subscription.w,this.cartEventsSubscription=new Subscription.w,this.minQuantityValue=1}ngOnInit(){this.buildForm(),this.watchQuantityChange()}ngOnDestroy(){var _a,_b;null===(_a=this.subscription)||void 0===_a||_a.unsubscribe(),null===(_b=this.cartEventsSubscription)||void 0===_b||_b.unsubscribe()}applyQuickOrder(){var _a,_b;if(this.quickOrderForm.invalid)return void this.quickOrderForm.markAllAsTouched();const productCode=null===(_a=this.quickOrderForm.get("productCode"))||void 0===_a?void 0:_a.value,quantity=null===(_b=this.quickOrderForm.get("quantity"))||void 0===_b?void 0:_b.value;this.watchAddEntrySuccessEvent(),this.watchAddEntryFailEvent(),productCode&&quantity&&this.activeCartService.addEntry(productCode,quantity)}buildForm(){this.quickOrderForm=this.formBuilder.group({productCode:["",[fesm2015_forms.kI.required]],quantity:[this.minQuantityValue,{updateOn:"blur",validators:[fesm2015_forms.kI.required]}]})}watchQuantityChange(){var _a;this.subscription.add(null===(_a=this.quickOrderForm.get("quantity"))||void 0===_a?void 0:_a.valueChanges.subscribe(value=>{var _a2;return null===(_a2=this.quickOrderForm.get("quantity"))||void 0===_a2?void 0:_a2.setValue(this.getValidCount(value),{emitEvent:!1})}))}watchAddEntrySuccessEvent(){this.cartEventsSubscription.add(this.eventService.get(spartacus_cart_base_root.VD).pipe((0,first.P)()).subscribe(data=>{var _a,_b;let productTranslation,key="quickOrderCartForm.stockLevelReached",messageType=spartacus_core.xUg.MSG_TYPE_WARNING;data.quantityAdded&&(key=data.quantityAdded>1?"quickOrderCartForm.entriesWereAdded":"quickOrderCartForm.entryWasAdded",productTranslation=data.quantityAdded>1?"quickOrderCartForm.products":"quickOrderCartForm.product",messageType=spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.globalMessageService.add({key,params:{product:(null===(_b=null===(_a=null==data?void 0:data.entry)||void 0===_a?void 0:_a.product)||void 0===_b?void 0:_b.name)||productTranslation,quantity:data.quantityAdded}},messageType),this.resetForm()}))}watchAddEntryFailEvent(){this.cartEventsSubscription.add(this.eventService.get(spartacus_cart_base_root.K$).pipe((0,first.P)()).subscribe(()=>{this.globalMessageService.add({key:"quickOrderCartForm.noResults"},spartacus_core.xUg.MSG_TYPE_ERROR)}))}getValidCount(value){return(value<this.min||!value)&&(value=this.min),value}resetForm(){this.quickOrderForm.reset()}}__name(CartQuickOrderFormComponent,"CartQuickOrderFormComponent"),CartQuickOrderFormComponent.\u0275fac=__name(function(t){return new(t||CartQuickOrderFormComponent)(core.Y36(spartacus_cart_base_root.bu),core.Y36(spartacus_core.POd),core.Y36(fesm2015_forms.QS),core.Y36(spartacus_core.IWp))},"CartQuickOrderFormComponent_Factory"),CartQuickOrderFormComponent.\u0275cmp=core.Xpm({type:CartQuickOrderFormComponent,selectors:[["cx-cart-quick-order-form"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-cart-quick-order-form-title"],[1,"form-group"],[3,"formGroup","ngSubmit"],[1,"cx-cart-quick-order-form-container"],[1,"cx-cart-quick-order-form-productID"],[1,"cx-cart-quick-order-form-label"],["aria-required","true","formControlName","productCode","required","true","type","text",1,"form-control","input-product-code",3,"placeholder"],[1,"cx-cart-quick-order-form-qty"],["aria-required","true","formControlName","quantity","required","true","type","number",1,"form-control","input-quantity"],["type","submit",1,"btn","btn-block","btn-action","apply-quick-order-button",3,"disabled"],[3,"control"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CartQuickOrderFormComponent_ng_container_0_Template,28,34,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.cart$))},"CartQuickOrderFormComponent_Template"),dependencies:[common.O5,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.wV,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.Q7,fesm2015_forms.sg,fesm2015_forms.u,spartacus_storefront.Ahv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class CartQuickOrderFormModule{}__name(CartQuickOrderFormModule,"CartQuickOrderFormModule"),CartQuickOrderFormModule.\u0275fac=__name(function(t){return new(t||CartQuickOrderFormModule)},"CartQuickOrderFormModule_Factory"),CartQuickOrderFormModule.\u0275mod=core.oAB({type:CartQuickOrderFormModule}),CartQuickOrderFormModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CartQuickOrderFormComponent:{component:CartQuickOrderFormComponent}}})],imports:[common.ez,fesm2015_forms.UX,spartacus_core.LUR,spartacus_storefront.Fym]});class QuickOrderOrderEntriesContext{constructor(quickOrderService,productConnector){this.quickOrderService=quickOrderService,this.productConnector=productConnector,this.type=spartacus_cart_base_root.lM.QUICK_ORDER}getEntries(){return this.quickOrderService.getEntries()}addEntries(productsData){return(0,merge.T)(productsData.map(productData=>this.quickOrderService.canAdd(productData.productCode).pipe((0,switchMap.w)(canAdd=>canAdd?this.productConnector.get(productData.productCode).pipe((0,filter.h)(product=>!!product),(0,tap.b)(product=>{this.quickOrderService.addProduct(product,productData.quantity)}),(0,map.U)(product=>this.handleResults(product,productData)),(0,catchError.K)(response=>(0,of.of)(this.handleErrors(response,productData.productCode)))):(0,of.of)({productCode:productData.productCode,statusCode:spartacus_cart_base_root.QX.LIMIT_EXCEEDED}))))).pipe((0,mergeAll.J)(),(0,take.q)(productsData.length))}handleResults(product,productData){var _a,_b;return(null===(_a=product.stock)||void 0===_a?void 0:_a.stockLevel)&&productData.quantity>product.stock.stockLevel?{productCode:productData.productCode,productName:null==product?void 0:product.name,statusCode:spartacus_cart_base_root.QX.LOW_STOCK,quantity:productData.quantity,quantityAdded:product.stock.stockLevel}:"outOfStock"===(null===(_b=product.stock)||void 0===_b?void 0:_b.stockLevelStatus)?{productCode:productData.productCode,statusCode:spartacus_cart_base_root.QX.NO_STOCK,productName:null==product?void 0:product.name}:{productCode:productData.productCode,statusCode:spartacus_cart_base_root.QX.SUCCESS}}handleErrors(response,productCode){var _a;return"UnknownIdentifierError"===(null===(_a=null==response?void 0:response.error)||void 0===_a?void 0:_a.errors[0].type)?{productCode,statusCode:spartacus_cart_base_root.QX.UNKNOWN_IDENTIFIER}:((0,core.X6Q)()&&console.warn("Unrecognized cart add entry action type while mapping messages",response),{productCode,statusCode:spartacus_cart_base_root.QX.UNKNOWN_ERROR})}}__name(QuickOrderOrderEntriesContext,"QuickOrderOrderEntriesContext"),QuickOrderOrderEntriesContext.\u0275fac=__name(function(t){return new(t||QuickOrderOrderEntriesContext)(core.LFG(spartacus_cart_quick_order_root.be),core.LFG(spartacus_core.GCj))},"QuickOrderOrderEntriesContext_Factory"),QuickOrderOrderEntriesContext.\u0275prov=core.Yz7({token:QuickOrderOrderEntriesContext,factory:QuickOrderOrderEntriesContext.\u0275fac,providedIn:"root"});class QuickOrderFormComponent{constructor(config,cd,quickOrderService,winRef){this.config=config,this.cd=cd,this.quickOrderService=quickOrderService,this.winRef=winRef,this.iconTypes=spartacus_storefront.e1G,this.isSearching=!1,this.noResults=!1,this.results=[],this.subscription=new Subscription.w,this.searchSubscription=new Subscription.w}ngOnInit(){this.buildForm(),this.subscription.add(this.watchProductAdd()),this.subscription.add(this.watchQueryChange())}onBlur(event){setTimeout(()=>{this.isSuggestionFocused()||this.blurSuggestionBox(event)})}clear(event){var _a,_b;null==event||event.preventDefault(),this.isResultsBoxOpen()&&this.toggleBodyClass("quick-order-searchbox-is-active",!1),(null===(_a=this.form.get("product"))||void 0===_a?void 0:_a.value)&&this.form.reset(),this.close(),null===(_b=this.cd)||void 0===_b||_b.detectChanges()}add(product,event){if(null==event||event.preventDefault(),product.multidimensional)return this.quickOrderService.setNonPurchasableProductError(product),void this.clear();this.quickOrderService.clearNonPurchasableProductError(),this.quickOrderService.addProduct(product)}addProduct(event){this.quickOrderService.canAdd().pipe((0,take.q)(1)).subscribe(canAdd=>{if(canAdd)if(1===this.results.length)this.add(this.results[0],event);else if(-1!==this.getFocusedIndex()){const product=this.results[this.getFocusedIndex()];this.add(product,event)}})}focusNextChild(event){if(event.preventDefault(),!this.results.length)return;const[results,focusedIndex]=[this.getResultElements(),this.getFocusedIndex()];results.length&&(focusedIndex>=results.length-1?results[0].focus():results[focusedIndex+1].focus())}focusPreviousChild(event){if(event.preventDefault(),!this.results.length)return;const[results,focusedIndex]=[this.getResultElements(),this.getFocusedIndex()];results.length&&(focusedIndex<1?results[results.length-1].focus():results[focusedIndex-1].focus())}isResultsBoxOpen(){return!!this.winRef&&!!this.winRef.document.querySelector(".quick-order-searchbox-is-active")}canAddProduct(){return this.quickOrderService.canAdd()}open(){this.toggleBodyClass("quick-order-searchbox-is-active",!0)}getResultElements(){return this.winRef?Array.from(this.winRef.document.querySelectorAll(".quick-order-results-products > li button")):[]}blurSuggestionBox(event){this.toggleBodyClass("quick-order-searchbox-is-active",!1),event&&event.target&&event.target.blur()}getFocusedElement(){if(this.winRef)return this.winRef.document.activeElement}getFocusedIndex(){return this.getResultElements().indexOf(this.getFocusedElement())}isSuggestionFocused(){return this.getResultElements().includes(this.getFocusedElement())}toggleBodyClass(className,add){this.winRef&&(void 0===add?this.winRef.document.body.classList.toggle(className):add?this.winRef.document.body.classList.add(className):this.winRef.document.body.classList.remove(className))}buildForm(){const form=new fesm2015_forms.nJ({});form.setControl("product",new fesm2015_forms.p4(null)),this.form=form}isEmpty(string){return""===(null==string?void 0:string.trim())||null==string}watchQueryChange(){return this.form.valueChanges.pipe((0,distinctUntilChanged.x)(),(0,debounceTime.b)(300),(0,filter.h)(value=>{var _a,_b,_c,_d;return null!==(_b=null===(_a=this.config)||void 0===_a?void 0:_a.quickOrder)&&void 0!==_b&&_b.searchForm?this.isEmpty(value.product)?(this.clear(),!1):!!value.product&&value.product.length>=(null===(_d=null===(_c=this.config.quickOrder)||void 0===_c?void 0:_c.searchForm)||void 0===_d?void 0:_d.minCharactersBeforeRequest):value})).subscribe(value=>{this.searchProducts(value.product)})}searchProducts(query){this.searchSubscription.add(this.canAddProduct().pipe((0,filter.h)(Boolean),(0,switchMap.w)(()=>{var _a,_b,_c;return this.quickOrderService.searchProducts(query,null===(_c=null===(_b=null===(_a=this.config)||void 0===_a?void 0:_a.quickOrder)||void 0===_b?void 0:_b.searchForm)||void 0===_c?void 0:_c.maxProducts).pipe((0,take.q)(1))})).subscribe(products=>{var _a;this.results=products,this.results.length?(this.noResults=!1,this.open()):this.noResults=!0,null===(_a=this.cd)||void 0===_a||_a.detectChanges()}))}clearResults(){this.results=[]}close(){this.resetSearchSubscription(),this.clearResults(),this.noResults=!1}resetSearchSubscription(){this.searchSubscription.unsubscribe(),this.searchSubscription=new Subscription.w}watchProductAdd(){return this.quickOrderService.getProductAdded().subscribe(()=>this.clear())}ngOnDestroy(){this.subscription.unsubscribe()}}__name(QuickOrderFormComponent,"QuickOrderFormComponent"),QuickOrderFormComponent.\u0275fac=__name(function(t){return new(t||QuickOrderFormComponent)(core.Y36(spartacus_core.DeH),core.Y36(core.sBO),core.Y36(spartacus_cart_quick_order_root.be),core.Y36(spartacus_core.X9E))},"QuickOrderFormComponent_Factory"),QuickOrderFormComponent.\u0275cmp=core.Xpm({type:QuickOrderFormComponent,selectors:[["cx-quick-order-form"]],inputs:{limit:"limit"},decls:16,vars:22,consts:[[1,"quick-order-form-container",3,"formGroup"],["role","search",1,"quick-order-form-input"],[4,"cxFeatureLevel"],["class","quick-order-form-reset-icon",3,"click","keydown.enter",4,"ngIf","ngIfElse"],["searchIcon",""],["class","list-limit-reached-text","role","alert",4,"ngIf"],["aria-live","polite","id","quickOrderFormInitialDescription","aria-atomic","true",1,"cx-visually-hidden"],["aria-controls","results","aria-describedby","quickOrderFormInitialDescription","formControlName","product","type","text",1,"form-control",3,"placeholder","blur","focus","keydown.arrowdown","keydown.arrowup","keydown.enter","keydown.escape"],["aria-controls","quick-order-search-results","aria-describedby","quickOrderFormInitialDescription","formControlName","product","type","text",1,"form-control",3,"placeholder","blur","focus","keydown.arrowdown","keydown.arrowup","keydown.enter","keydown.escape"],[1,"quick-order-form-reset-icon",3,"click","keydown.enter"],[3,"type"],["tabindex","-1",1,"quick-order-form-search-icon"],["role","alert",1,"list-limit-reached-text"],["class","quick-order-results","role","dialog","id","results",4,"ngIf"],["role","dialog","id","results",1,"quick-order-results"],["class","quick-order-results-products","role","listbox",4,"ngIf"],["class","quick-order-no-results",4,"ngIf"],["role","listbox",1,"quick-order-results-products"],["class","quick-order-results-product-container",4,"ngFor","ngForOf"],[1,"quick-order-results-product-container"],["role","option",1,"quick-order-results-product",3,"blur","click","keydown.arrowdown","keydown.arrowup","keydown.enter","keydown.escape"],["class","media","format","thumbnail","role","presentation",3,"alt","container",4,"ngIf"],[1,"name",3,"innerHTML"],[1,"id"],[1,"price"],["format","thumbnail","role","presentation",1,"media",3,"alt","container"],[1,"quick-order-no-results"],["class","quick-order-results","role","dialog","id","quick-order-search-results",4,"ngIf"],["role","dialog","id","quick-order-search-results",1,"quick-order-results"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"form",0)(1,"div",1),core.ALo(2,"cxTranslate"),core.YNc(3,QuickOrderFormComponent_ng_container_3_Template,4,9,"ng-container",2),core.YNc(4,QuickOrderFormComponent_ng_container_4_Template,4,9,"ng-container",2),core.YNc(5,QuickOrderFormComponent_button_5_Template,3,4,"button",3),core.YNc(6,QuickOrderFormComponent_ng_template_6_Template,3,4,"ng-template",null,4,core.W1O),core.YNc(8,QuickOrderFormComponent_span_8_Template,3,3,"span",5),core.ALo(9,"async"),core.qZA(),core.YNc(10,QuickOrderFormComponent_ng_container_10_Template,2,1,"ng-container",2),core.YNc(11,QuickOrderFormComponent_ng_container_11_Template,2,1,"ng-container",2),core.qZA(),core.TgZ(12,"label",6),core._uU(13),core.ALo(14,"cxTranslate"),core.ALo(15,"cxTranslate"),core.qZA()),2&rf){const _r3=core.MAs(7);let tmp_4_0,tmp_6_0;core.Q6J("formGroup",ctx.form),core.xp6(1),core.uIk("aria-label",core.lcZ(2,11,"quickOrderForm.quickOrderSearch")),core.xp6(2),core.Q6J("cxFeatureLevel","!5.1"),core.xp6(1),core.Q6J("cxFeatureLevel","5.1"),core.xp6(1),core.Q6J("ngIf",null==(tmp_4_0=ctx.form.get("product"))?null:tmp_4_0.value)("ngIfElse",_r3),core.xp6(3),core.Q6J("ngIf",!core.lcZ(9,13,ctx.canAddProduct())&&(null==(tmp_6_0=ctx.form.get("product"))?null:tmp_6_0.dirty)),core.xp6(2),core.Q6J("cxFeatureLevel","!5.1"),core.xp6(1),core.Q6J("cxFeatureLevel","5.1"),core.xp6(2),core.AsE(" ",ctx.results.length?core.xi3(14,15,"quickOrderForm.productsResults",core.VKq(20,_c2,ctx.results.length)):""," ",core.lcZ(15,18,"quickOrderForm.initialDescription"),"\n")}},"QuickOrderFormComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.oJW,spartacus_storefront.R7z,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.u,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class QuickOrderItemComponent{constructor(cd,quickOrderService){this.cd=cd,this.quickOrderService=quickOrderService,this.loading=!1,this.subscription=new Subscription.w}get entry(){return this._entry}set entry(value){this._entry=value,this.quantityControl=new fesm2015_forms.p4(this.entry.quantity,{updateOn:"blur"})}ngOnInit(){this.subscription.add(this.quantityControl.valueChanges.subscribe(()=>{this.quickOrderService.updateEntryQuantity(this.index,this.quantityControl.value)})),this.subscription.add(this.watchProductAdd())}removeEntry(){this.quickOrderService.softDeleteEntry(this.index),this.cd.detectChanges()}watchProductAdd(){return this.quickOrderService.getProductAdded().subscribe(productCode=>{var _a;productCode===(null===(_a=this.entry.product)||void 0===_a?void 0:_a.code)&&(this.quantityControl=new fesm2015_forms.p4(this.entry.quantity),this.cd.detectChanges())})}ngOnDestroy(){var _a;null===(_a=this.subscription)||void 0===_a||_a.unsubscribe()}}__name(QuickOrderItemComponent,"QuickOrderItemComponent"),QuickOrderItemComponent.\u0275fac=__name(function(t){return new(t||QuickOrderItemComponent)(core.Y36(core.sBO),core.Y36(spartacus_cart_quick_order_root.be))},"QuickOrderItemComponent_Factory"),QuickOrderItemComponent.\u0275cmp=core.Xpm({type:QuickOrderItemComponent,selectors:[["","cx-quick-order-item",""],["cx-quick-order-item"]],inputs:{entry:"entry",index:"index",loading:"loading"},attrs:["cx-quick-order-item",""],decls:30,vars:41,consts:[["role","cell"],[1,"cx-table-item-container"],["tabindex","-1",3,"ngClass","routerLink"],["format","cartIcon",3,"container","alt"],[1,"cx-info"],[1,"cx-name"],[1,"cx-link",3,"ngClass","routerLink"],[1,"cx-code"],["role","cell",1,"cx-price"],[1,"cx-mobile-header"],[1,"cx-value"],["role","cell",1,"cx-quantity"],[3,"control","max","readonly"],["role","cell",1,"cx-actions"],[1,"link","cx-action-link",3,"disabled","click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"td",0)(1,"div",1)(2,"a",2),core.ALo(3,"cxUrl"),core._UZ(4,"cx-media",3),core.qZA(),core.TgZ(5,"div",4)(6,"div",5)(7,"a",6),core.ALo(8,"cxUrl"),core._uU(9),core.qZA()(),core.TgZ(10,"div",7),core._uU(11),core.ALo(12,"cxTranslate"),core.qZA()()()(),core.TgZ(13,"td",8)(14,"div",9),core._uU(15),core.ALo(16,"cxTranslate"),core.qZA(),core.TgZ(17,"div",10),core._uU(18),core.qZA()(),core.TgZ(19,"td",11)(20,"div",9),core._uU(21),core.ALo(22,"cxTranslate"),core.qZA(),core.TgZ(23,"div",10),core._UZ(24,"cx-item-counter",12),core.qZA()(),core.TgZ(25,"td",13)(26,"button",14),core.NdJ("click",__name(function(){return ctx.removeEntry()},"QuickOrderItemComponent_Template_button_click_26_listener")),core.ALo(27,"cxTranslate"),core._uU(28),core.ALo(29,"cxTranslate"),core.qZA()()),2&rf&&(core.xp6(2),core.Q6J("ngClass",core.WLB(32,_c4,ctx.loading,!(null!=ctx.entry&&null!=ctx.entry.product&&null!=ctx.entry.product.images&&ctx.entry.product.images.PRIMARY)))("routerLink",core.lcZ(3,18,core.VKq(35,_c5,ctx.entry.product))),core.xp6(2),core.Q6J("container",null==ctx.entry||null==ctx.entry.product||null==ctx.entry.product.images?null:ctx.entry.product.images.PRIMARY)("alt",null==ctx.entry||null==ctx.entry.product?null:ctx.entry.product.name),core.xp6(3),core.Q6J("ngClass",core.VKq(37,_c6,ctx.loading))("routerLink",core.lcZ(8,20,core.VKq(39,_c5,ctx.entry.product))),core.xp6(2),core.hij("",(null==ctx.entry.product?null:ctx.entry.product.name)||"-"," "),core.xp6(2),core.AsE(" ",core.lcZ(12,22,"quickOrderTable.id")," ",null==ctx.entry.product?null:ctx.entry.product.code," "),core.xp6(4),core.hij(" ",core.lcZ(16,24,"quickOrderTable.itemPrice")," "),core.xp6(3),core.hij(" ",(null==ctx.entry.basePrice?null:ctx.entry.basePrice.formattedValue)||"-"," "),core.xp6(3),core.hij(" ",core.lcZ(22,26,"quickOrderTable.qty")," "),core.xp6(3),core.Q6J("control",ctx.quantityControl)("max",null==ctx.entry.product||null==ctx.entry.product.stock?null:ctx.entry.product.stock.stockLevel)("readonly",ctx.loading),core.xp6(2),core.Q6J("disabled",ctx.loading),core.uIk("aria-label",core.lcZ(27,28,"common.remove")),core.xp6(2),core.hij(" ",core.lcZ(29,30,"common.remove")," "))},"QuickOrderItemComponent_Template"),dependencies:[common.mk,spartacus_storefront.odZ,spartacus_storefront.R7z,router.yS,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class QuickOrderTableComponent{constructor(){this.entries=[],this.loading=!1}}__name(QuickOrderTableComponent,"QuickOrderTableComponent"),QuickOrderTableComponent.\u0275fac=__name(function(t){return new(t||QuickOrderTableComponent)},"QuickOrderTableComponent_Factory"),QuickOrderTableComponent.\u0275cmp=core.Xpm({type:QuickOrderTableComponent,selectors:[["cx-quick-order-table"]],inputs:{entries:"entries",loading:"loading"},decls:1,vars:1,consts:[["class","cx-quick-order-table-wrapper","role","table",4,"ngIf"],["role","table",1,"cx-quick-order-table-wrapper"],[1,"cx-visually-hidden"],["role","row",1,"cx-item-list-header","cx-quick-order-table-header"],["role","columnheader",1,"cx-item-list-desc"],["role","columnheader",1,"cx-item-list-price"],["role","columnheader",1,"cx-item-list-qty"],["role","columnheader",1,"cx-item-list-actions"],[1,"cx-item-list-items"],["cx-quick-order-item","","class","cx-item-list-row cx-quick-order-table-row",3,"entry","index","loading",4,"ngFor","ngForOf"],["cx-quick-order-item","",1,"cx-item-list-row","cx-quick-order-table-row",3,"entry","index","loading"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,QuickOrderTableComponent_table_0_Template,20,16,"table",0),2&rf&&core.Q6J("ngIf",(null==ctx.entries?null:ctx.entries.length)>0)},"QuickOrderTableComponent_Template"),dependencies:[common.sg,common.O5,QuickOrderItemComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class QuickOrderComponent{constructor(activeCartService,component,globalMessageService,quickOrderService,quickOrderStatePersistenceService){this.activeCartService=activeCartService,this.component=component,this.globalMessageService=globalMessageService,this.quickOrderService=quickOrderService,this.quickOrderStatePersistenceService=quickOrderStatePersistenceService,this.quickOrderListLimit$=this.component.data$.pipe((0,map.U)(data=>data.quickOrderListLimit),(0,tap.b)(limit=>{limit&&this.quickOrderService.setListLimit(limit)})),this.isCartStable$=(0,combineLatest.aj)([this.activeCartService.getActiveCartId(),this.activeCartService.isStable()]).pipe((0,map.U)(([activeCartId,isStable])=>!activeCartId||isStable)),this.globalMessageType=spartacus_core.xUg,this.cartErrors$=new BehaviorSubject.X([]),this.cartWarnings$=new BehaviorSubject.X([]),this.cartSuccesses$=new BehaviorSubject.X([]),this.showAddToCartInformation$=new BehaviorSubject.X(!1),this.nonPurchasableProductError$=new BehaviorSubject.X(null)}ngOnInit(){this.cartId$=this.activeCartService.getActiveCartId(),this.entries$=this.quickOrderService.getEntries(),this.quickOrderStatePersistenceService.initSync()}ngOnDestroy(){this.quickOrderService.clearDeletedEntries()}get errors$(){return this.cartErrors$.asObservable()}get warnings$(){return this.cartWarnings$.asObservable()}get successes$(){return this.cartSuccesses$.asObservable()}get nonPurchasableError$(){return this.quickOrderService.getNonPurchasableProductError()}get addToCartInformation$(){return this.showAddToCartInformation$.asObservable()}get softDeletedEntries$(){return this.quickOrderService.getSoftDeletedEntries()}clear(){this.quickOrderService.clearList(),this.globalMessageService.add({key:"quickOrderTable.listCleared"},spartacus_core.xUg.MSG_TYPE_INFO)}addToCart(orderEntries){orderEntries.length?(this.clearStatuses(),this.quickOrderService.addToCart().pipe((0,first.P)()).subscribe(([entries,errors])=>{errors.forEach(err=>{err.entry||(err.entry=orderEntries.find(e=>{var _a;return(null===(_a=e.product)||void 0===_a?void 0:_a.code)===err.productCode}))}),this.extractErrors(errors),this.extractWarnings(errors),errors.length?this.extractSuccesses(errors,entries):this.showAddedToCartSuccessMessage()})):this.showAddToCartInformation$.next(!0)}clearErrors(){this.cartErrors$.next([])}clearWarnings(){this.cartWarnings$.next([])}clearSuccesses(){this.cartSuccesses$.next([])}clearAddToCartInformation(){this.showAddToCartInformation$.next(!1)}undoDeletion(entry){var _a;null!==(_a=entry.product)&&void 0!==_a&&_a.code&&this.quickOrderService.restoreSoftDeletedEntry(entry.product.code)}clearDeletion(entry){var _a;null!==(_a=entry.product)&&void 0!==_a&&_a.code&&this.quickOrderService.hardDeleteEntry(entry.product.code)}clearNonPurchasableError(){this.quickOrderService.clearNonPurchasableProductError()}canAddProduct(){return this.quickOrderService.canAdd()}extractErrors(errors){const noAddedEntries=errors.filter(error=>0===error.quantityAdded);this.setErrors(noAddedEntries)}extractWarnings(errors){const warnings=errors.filter(error=>0!==error.quantityAdded);this.setWarnings(warnings)}extractSuccesses(errors,entries){const successAddedEntries=[];entries.forEach(entry=>{errors.find(error=>{var _a;return error.productCode===(null===(_a=entry.product)||void 0===_a?void 0:_a.code)})||successAddedEntries.push(entry)}),this.setSuccesses(successAddedEntries)}clearStatuses(){this.clearErrors(),this.clearWarnings(),this.clearSuccesses()}showAddedToCartSuccessMessage(){this.globalMessageService.add({key:"quickOrderTable.addedtoCart"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}setErrors(errors){this.cartErrors$.next(errors)}setWarnings(warnings){this.cartWarnings$.next(warnings)}setSuccesses(entries){this.cartSuccesses$.next(entries)}}__name(QuickOrderComponent,"QuickOrderComponent"),QuickOrderComponent.\u0275fac=__name(function(t){return new(t||QuickOrderComponent)(core.Y36(spartacus_cart_base_root.bu),core.Y36(spartacus_storefront.exf),core.Y36(spartacus_core.IWp),core.Y36(spartacus_cart_quick_order_root.be),core.Y36(QuickOrderStatePersistenceService))},"QuickOrderComponent_Factory"),QuickOrderComponent.\u0275cmp=core.Xpm({type:QuickOrderComponent,selectors:[["cx-quick-order"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c7,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.quickOrderForm=_t.first)}},"QuickOrderComponent_Query"),decls:17,vars:24,consts:[["aria-atomic","true","aria-live","assertive","aria-relevant","additions",1,"quick-order-message-container"],[4,"ngIf"],[1,"quick-order-list-limit-message",3,"text","isVisibleCloseButton","type"],[1,"quick-order-add-to-cart-information-message",3,"text","type","closeMessage"],[1,"quick-order-non-purchasable-product-error-message",3,"text","type","closeMessage"],["class","quick-order-deletions-message",3,"actionButtonText","actionButtonMessage","text","type","buttonAction","closeMessage",4,"ngFor","ngForOf"],[1,"quick-order-deletions-message",3,"actionButtonText","actionButtonMessage","text","type","buttonAction","closeMessage"],["class","quick-order-errors-message",3,"accordionText","text","type","closeMessage",4,"ngIf"],[1,"quick-order-errors-message",3,"accordionText","text","type","closeMessage"],[1,"quick-order-errors"],["class","quick-order-error-item",4,"ngFor","ngForOf"],[1,"cx-visually-hidden"],[1,"quick-order-error-item"],["class","quick-order-warnings-message",3,"accordionText","text","type","closeMessage",4,"ngIf"],[1,"quick-order-warnings-message",3,"accordionText","text","type","closeMessage"],[1,"quick-order-warnings"],["class","quick-order-warning-item",4,"ngFor","ngForOf"],[1,"quick-order-warning-item"],["class","quick-order-successes-message",3,"text","type","closeMessage",4,"ngIf"],[1,"quick-order-successes-message",3,"text","type","closeMessage"],[1,"quick-order-successes"],["class","quick-order-success-item",4,"ngFor","ngForOf"],[1,"quick-order-success-item"],[1,"quick-order-header"],[4,"cxFeatureLevel"],[1,"quick-order-form-body"],[3,"limit"],["quickOrderForm",""],[1,"quick-order-table-body"],[3,"entries","loading"],[1,"quick-order-footer","row"],[1,"col-xs-12","col-md-5","col-lg-4"],["class","btn btn-block btn-action clear-button","type","button",3,"disabled","click",4,"ngIf"],[3,"ariaLabel","loading","clickEvent"],["type","button",1,"btn","btn-block","btn-action","clear-button",3,"disabled","click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,QuickOrderComponent_ng_container_1_Template,3,3,"ng-container",1),core.ALo(2,"async"),core.YNc(3,QuickOrderComponent_ng_container_3_Template,3,4,"ng-container",1),core.ALo(4,"async"),core.YNc(5,QuickOrderComponent_ng_container_5_Template,3,7,"ng-container",1),core.ALo(6,"async"),core.YNc(7,QuickOrderComponent_ng_container_7_Template,3,3,"ng-container",1),core.ALo(8,"async"),core.YNc(9,QuickOrderComponent_ng_container_9_Template,2,1,"ng-container",1),core.ALo(10,"async"),core.YNc(11,QuickOrderComponent_ng_container_11_Template,2,1,"ng-container",1),core.ALo(12,"async"),core.YNc(13,QuickOrderComponent_ng_container_13_Template,2,1,"ng-container",1),core.ALo(14,"async"),core.qZA(),core.YNc(15,QuickOrderComponent_ng_container_15_Template,3,3,"ng-container",1),core.ALo(16,"async")),2&rf&&(core.xp6(1),core.Q6J("ngIf",core.lcZ(2,8,ctx.entries$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,10,ctx.addToCartInformation$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(6,12,ctx.nonPurchasableError$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(8,14,ctx.softDeletedEntries$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(10,16,ctx.errors$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(12,18,ctx.warnings$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(14,20,ctx.successes$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(16,22,ctx.quickOrderListLimit$)))},"QuickOrderComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.qqZ,spartacus_storefront.lc1,spartacus_core.EJv,QuickOrderFormComponent,QuickOrderTableComponent,common.Ov,common.Nd,spartacus_core.X$D],encapsulation:2,changeDetection:0});class QuickOrderListModule{}__name(QuickOrderListModule,"QuickOrderListModule"),QuickOrderListModule.\u0275fac=__name(function(t){return new(t||QuickOrderListModule)},"QuickOrderListModule_Factory"),QuickOrderListModule.\u0275mod=core.oAB({type:QuickOrderListModule}),QuickOrderListModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{QuickOrderComponent:{component:QuickOrderComponent,data:{quickOrderListLimit:10}}}})],imports:[spartacus_storefront.p$5,common.ez,spartacus_storefront.Fym,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.Td$,spartacus_storefront.cOq,spartacus_storefront.$zX,spartacus_storefront.Quc,fesm2015_forms.UX,router.Bz,spartacus_core.bhT,spartacus_core.GSh]});class QuickOrderComponentsModule{}__name(QuickOrderComponentsModule,"QuickOrderComponentsModule"),QuickOrderComponentsModule.\u0275fac=__name(function(t){return new(t||QuickOrderComponentsModule)},"QuickOrderComponentsModule_Factory"),QuickOrderComponentsModule.\u0275mod=core.oAB({type:QuickOrderComponentsModule}),QuickOrderComponentsModule.\u0275inj=core.cJS({providers:[{provide:spartacus_cart_quick_order_root.KI,useExisting:QuickOrderOrderEntriesContext}],imports:[router.Bz,QuickOrderListModule,CartQuickOrderFormModule]});class QuickOrderModule{}__name(QuickOrderModule,"QuickOrderModule"),QuickOrderModule.\u0275fac=__name(function(t){return new(t||QuickOrderModule)},"QuickOrderModule_Factory"),QuickOrderModule.\u0275mod=core.oAB({type:QuickOrderModule}),QuickOrderModule.\u0275inj=core.cJS({imports:[QuickOrderCoreModule,QuickOrderComponentsModule]})}};