"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=789,exports.ids=[789],exports.modules={7789:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AsmModule:()=>AsmModule});var core=__webpack_require__(5e3),common=__webpack_require__(9808),fesm2015_forms=__webpack_require__(3075),spartacus_core=__webpack_require__(3409),spartacus_storefront=__webpack_require__(8807),Subscription=__webpack_require__(2654),of=__webpack_require__(1086),debounceTime=__webpack_require__(13),distinctUntilChanged=__webpack_require__(5778),switchMap=__webpack_require__(7545),map=__webpack_require__(4850),take=__webpack_require__(2986),spartacus_asm_root=__webpack_require__(7291),ngrx_store=__webpack_require__(5094),combineLatest=__webpack_require__(6053),catchError=__webpack_require__(7221),filter=__webpack_require__(2198),ngrx_effects=__webpack_require__(6016);class AsmAdapter{}__name(AsmAdapter,"AsmAdapter");class AsmConnector{constructor(asmAdapter){this.asmAdapter=asmAdapter}customerSearch(options){return this.asmAdapter.customerSearch(options)}}__name(AsmConnector,"AsmConnector"),AsmConnector.\u0275fac=__name(function(t){return new(t||AsmConnector)(core.LFG(AsmAdapter))},"AsmConnector_Factory"),AsmConnector.\u0275prov=core.Yz7({token:AsmConnector,factory:AsmConnector.\u0275fac,providedIn:"root"});class AsmUiUpdate{constructor(payload){this.payload=payload,this.type="[Asm] UI Update"}}__name(AsmUiUpdate,"AsmUiUpdate");class CustomerSearch extends spartacus_core.kPG.LoaderLoadAction{constructor(payload){super("[asm] Customer search data"),this.payload=payload,this.type="[Asm] Customer Search"}}__name(CustomerSearch,"CustomerSearch");class CustomerSearchFail extends spartacus_core.kPG.LoaderFailAction{constructor(payload){super("[asm] Customer search data"),this.payload=payload,this.type="[Asm] Customer Search Fail"}}__name(CustomerSearchFail,"CustomerSearchFail");class CustomerSearchSuccess extends spartacus_core.kPG.LoaderSuccessAction{constructor(payload){super("[asm] Customer search data"),this.payload=payload,this.type="[Asm] Customer Search Success"}}__name(CustomerSearchSuccess,"CustomerSearchSuccess");class CustomerSearchReset extends spartacus_core.kPG.LoaderResetAction{constructor(){super("[asm] Customer search data"),this.type="[Asm] Customer Search Reset"}}__name(CustomerSearchReset,"CustomerSearchReset");class LogoutCustomerSupportAgent{constructor(){this.type="[Auth] Logout Customer Support Agent"}}__name(LogoutCustomerSupportAgent,"LogoutCustomerSupportAgent");class CustomerEffects{constructor(actions$,asmConnector){this.actions$=actions$,this.asmConnector=asmConnector,this.customerSearch$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Asm] Customer Search"),(0,map.U)(action=>action.payload),(0,switchMap.w)(options=>this.asmConnector.customerSearch(options).pipe((0,map.U)(customerSearchResults=>new CustomerSearchSuccess(customerSearchResults)),(0,catchError.K)(error=>(0,of.of)(new CustomerSearchFail((0,spartacus_core.cxH)(error))))))))}}__name(CustomerEffects,"CustomerEffects"),CustomerEffects.\u0275fac=__name(function(t){return new(t||CustomerEffects)(core.LFG(ngrx_effects.eX),core.LFG(AsmConnector))},"CustomerEffects_Factory"),CustomerEffects.\u0275prov=core.Yz7({token:CustomerEffects,factory:CustomerEffects.\u0275fac});const effects=[CustomerEffects],initialState={collapsed:!1};function reducer(state=initialState,action){return"[Asm] UI Update"===action.type?Object.assign(Object.assign({},state),action.payload):state}function getReducers(){return{customerSearchResult:spartacus_core.kPG.loaderReducer("[asm] Customer search data"),asmUi:reducer}}__name(reducer,"reducer"),__name(getReducers,"getReducers");const reducerToken=new core.OlP("AsmReducers"),reducerProvider={provide:reducerToken,useFactory:getReducers};function clearCustomerSupportAgentAsmState(reducer2){return function(state,action){return"[Auth] Logout Customer Support Agent"===action.type&&(state=Object.assign(Object.assign({},state),{customerSearchResult:{}})),reducer2(state,action)}}__name(clearCustomerSupportAgentAsmState,"clearCustomerSupportAgentAsmState");const metaReducers=[clearCustomerSupportAgentAsmState],getAsmState=(0,ngrx_store.ZF)("asm"),getAsmUi=(0,ngrx_store.P1)(getAsmState,state=>state.asmUi),getCustomerSearchResultsLoaderState=(0,ngrx_store.P1)(getAsmState,state=>state.customerSearchResult),getCustomerSearchResults=(0,ngrx_store.P1)(getCustomerSearchResultsLoaderState,state=>spartacus_core.kPG.loaderValueSelector(state)),getCustomerSearchResultsLoading=(0,ngrx_store.P1)(getCustomerSearchResultsLoaderState,state=>spartacus_core.kPG.loaderLoadingSelector(state));class AsmStatePersistenceService{constructor(statePersistenceService,store,authStorageService){this.statePersistenceService=statePersistenceService,this.store=store,this.authStorageService=authStorageService,this.subscription=new Subscription.w,this.key="asm"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.getAsmState(),onRead:state=>this.onRead(state)}))}getAsmState(){return(0,combineLatest.aj)([this.store.pipe((0,filter.h)(store=>!!store.asm),(0,ngrx_store.Ys)(getAsmUi)),(0,of.of)(this.authStorageService.getEmulatedUserToken()),this.authStorageService.getTokenTarget()]).pipe((0,map.U)(([ui,emulatedUserToken,tokenTarget])=>{let emulatedToken=emulatedUserToken;return emulatedToken&&(emulatedToken=Object.assign({},emulatedUserToken),delete emulatedToken.refresh_token),{ui,emulatedUserToken:emulatedToken,tokenTarget}}))}onRead(state){state&&(state.ui&&this.store.dispatch(new AsmUiUpdate(state.ui)),state.emulatedUserToken&&this.authStorageService.setEmulatedUserToken(state.emulatedUserToken),state.tokenTarget&&this.authStorageService.setTokenTarget(state.tokenTarget))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(AsmStatePersistenceService,"AsmStatePersistenceService"),AsmStatePersistenceService.\u0275fac=__name(function(t){return new(t||AsmStatePersistenceService)(core.LFG(spartacus_core.WBb),core.LFG(ngrx_store.yh),core.LFG(spartacus_asm_root.JW))},"AsmStatePersistenceService_Factory"),AsmStatePersistenceService.\u0275prov=core.Yz7({token:AsmStatePersistenceService,factory:AsmStatePersistenceService.\u0275fac,providedIn:"root"});class AsmStoreModule{}function asmStatePersistenceFactory(asmStatePersistenceService){return __name(()=>asmStatePersistenceService.initSync(),"result")}__name(AsmStoreModule,"AsmStoreModule"),AsmStoreModule.\u0275fac=__name(function(t){return new(t||AsmStoreModule)},"AsmStoreModule_Factory"),AsmStoreModule.\u0275mod=core.oAB({type:AsmStoreModule}),AsmStoreModule.\u0275inj=core.cJS({providers:[reducerProvider],imports:[common.ez,spartacus_core.vUS,ngrx_store.Aw.forFeature("asm",reducerToken,{metaReducers}),ngrx_effects.sQ.forFeature(effects)]}),__name(asmStatePersistenceFactory,"asmStatePersistenceFactory");class AsmCoreModule{}__name(AsmCoreModule,"AsmCoreModule"),AsmCoreModule.\u0275fac=__name(function(t){return new(t||AsmCoreModule)},"AsmCoreModule_Factory"),AsmCoreModule.\u0275mod=core.oAB({type:AsmCoreModule}),AsmCoreModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({asm:{agentSessionTimer:{startingDelayInSeconds:600},customerSearch:{maxResults:20}}}),AsmConnector,{provide:spartacus_core.z4I,useFactory:asmStatePersistenceFactory,deps:[AsmStatePersistenceService],multi:!0}],imports:[common.ez,AsmStoreModule]});class AsmConfig extends spartacus_core.Vri{}__name(AsmConfig,"AsmConfig"),AsmConfig.\u0275fac=function(){let \u0275AsmConfig_BaseFactory;return __name(function(t){return(\u0275AsmConfig_BaseFactory||(\u0275AsmConfig_BaseFactory=core.n5z(AsmConfig)))(t||AsmConfig)},"AsmConfig_Factory")}(),AsmConfig.\u0275prov=core.Yz7({token:AsmConfig,factory:__name(function(t){let r=null;return r=t?new(t||AsmConfig):core.LFG(spartacus_core.DeH),r},"AsmConfig_Factory"),providedIn:"root"});const CUSTOMER_SEARCH_PAGE_NORMALIZER=new core.OlP("CustomerSearchPageNormalizer");class AsmService{constructor(store){this.store=store}customerSearch(options){this.store.dispatch(new CustomerSearch(options))}customerSearchReset(){this.store.dispatch(new CustomerSearchReset)}getCustomerSearchResults(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerSearchResults))}getCustomerSearchResultsLoading(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerSearchResultsLoading))}updateAsmUiState(asmUi){this.store.dispatch(new AsmUiUpdate(asmUi))}getAsmUiState(){return this.store.pipe((0,ngrx_store.Ys)(getAsmUi))}}__name(AsmService,"AsmService"),AsmService.\u0275fac=__name(function(t){return new(t||AsmService)(core.LFG(ngrx_store.yh))},"AsmService_Factory"),AsmService.\u0275prov=core.Yz7({token:AsmService,factory:AsmService.\u0275fac,providedIn:"root"});var spartacus_user_account_root=__webpack_require__(7777);function CSAgentLoginFormComponent_form_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"form",2),core.NdJ("ngSubmit",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onSubmit())},"CSAgentLoginFormComponent_form_0_Template_form_ngSubmit_0_listener")),core.TgZ(1,"label"),core._UZ(2,"input",3),core.ALo(3,"cxTranslate"),core._UZ(4,"cx-form-errors",4),core.qZA(),core.TgZ(5,"label"),core._UZ(6,"input",5),core.ALo(7,"cxTranslate"),core._UZ(8,"cx-form-errors",4),core.qZA(),core.TgZ(9,"button",6),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA()()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formGroup",ctx_r0.csAgentLoginForm),core.xp6(2),core.s9C("placeholder",core.lcZ(3,6,"asm.loginForm.userId.label")),core.xp6(2),core.Q6J("control",ctx_r0.csAgentLoginForm.get("userId")),core.xp6(2),core.s9C("placeholder",core.lcZ(7,8,"asm.loginForm.password.label")),core.xp6(2),core.Q6J("control",ctx_r0.csAgentLoginForm.get("password")),core.xp6(2),core.hij(" ",core.lcZ(11,10,"asm.loginForm.submit")," ")}}function CSAgentLoginFormComponent_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",7),core.ALo(1,"cxTranslate"),core._UZ(2,"div")(3,"div")(4,"div"),core.qZA()),2&rf&&core.uIk("aria-label",core.lcZ(1,1,"common.loading"))}__name(CSAgentLoginFormComponent_form_0_Template,"CSAgentLoginFormComponent_form_0_Template"),__name(CSAgentLoginFormComponent_div_1_Template,"CSAgentLoginFormComponent_div_1_Template");const _c0=["resultList"],_c1=["searchTerm"];function CustomerSelectionComponent_div_9_button_2_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"button",10),core.NdJ("click",__name(function(){const result_r7=core.CHM(_r9).$implicit,ctx_r8=core.oxw(2);return core.KtG(ctx_r8.selectCustomerFromList(result_r7))},"CustomerSelectionComponent_div_9_button_2_Template_button_click_0_listener")),core.TgZ(1,"span",11),core._uU(2),core.qZA(),core.TgZ(3,"span",12),core._uU(4),core.qZA()()}if(2&rf){const result_r7=ctx.$implicit;core.xp6(2),core.Oqu(result_r7.name),core.xp6(2),core.Oqu(result_r7.uid)}}function CustomerSelectionComponent_div_9_button_3_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"button",10),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.closeResults())},"CustomerSelectionComponent_div_9_button_3_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()}2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.customerSearch.noMatch")," "))}function CustomerSelectionComponent_div_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",6,7),core.YNc(2,CustomerSelectionComponent_div_9_button_2_Template,5,2,"button",8),core.YNc(3,CustomerSelectionComponent_div_9_button_3_Template,3,3,"button",9),core.ALo(4,"async"),core.qZA()),2&rf){const results_r3=ctx.ngIf,ctx_r1=core.oxw(),_r0=core.MAs(3);core.xp6(2),core.Q6J("ngForOf",results_r3.entries),core.xp6(1),core.Q6J("ngIf",!core.lcZ(4,2,ctx_r1.searchResultsLoading$)&&_r0.value.length>=3&&!!results_r3.entries&&results_r3.entries.length<=0)}}function CustomerSelectionComponent_div_11_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",6)(1,"div",13),core.ALo(2,"cxTranslate"),core._UZ(3,"div")(4,"div")(5,"div"),core.qZA()()),2&rf&&(core.xp6(1),core.uIk("aria-label",core.lcZ(2,1,"common.loading")))}function CustomerEmulationComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r2=core.EpF();core.ynx(0),core._UZ(1,"input",1),core.TgZ(2,"button",2),core.NdJ("click",__name(function(){core.CHM(_r2);const ctx_r1=core.oxw();return core.KtG(ctx_r1.logoutCustomer())},"CustomerEmulationComponent_ng_container_0_Template_button_click_2_listener")),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.hYB("placeholder","",null==ctx_r0.customer?null:ctx_r0.customer.name,", ",null==ctx_r0.customer?null:ctx_r0.customer.uid,""),core.xp6(2),core.hij(" ",core.lcZ(4,3,"asm.endSession")," ")}}function AsmToggleUiComponent_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.toggleUi.collapse")," "))}function AsmToggleUiComponent_span_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.toggleUi.expand")," "))}function AsmMainUiComponent_cx_asm_session_timer_9_Template(rf,ctx){1&rf&&core._UZ(0,"cx-asm-session-timer")}function AsmMainUiComponent_button_11_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.hideUi())},"AsmMainUiComponent_button_11_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}2&rf&&core.s9C("title",core.lcZ(1,1,"asm.hideUi"))}function AsmMainUiComponent_button_14_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"button",9),core.NdJ("click",__name(function(){core.CHM(_r7);const ctx_r6=core.oxw();return core.KtG(ctx_r6.logout())},"AsmMainUiComponent_button_14_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}2&rf&&core.s9C("title",core.lcZ(1,1,"asm.logout"))}function AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template(rf,ctx){1&rf&&core._UZ(0,"cx-customer-emulation")}function AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template,1,0,"cx-customer-emulation",5),core.BQk()),2&rf){const notCollapsed_r8=core.oxw(2).ngIf;core.xp6(1),core.Q6J("ngIf",notCollapsed_r8)}}function AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template(rf,ctx){if(1&rf){const _r19=core.EpF();core.TgZ(0,"cx-customer-selection",14),core.NdJ("submitEvent",__name(function($event){core.CHM(_r19);const ctx_r18=core.oxw(4);return core.KtG(ctx_r18.startCustomerEmulationSession($event))},"AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template_cx_customer_selection_submitEvent_0_listener")),core.qZA()}}function AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template(rf,ctx){if(1&rf&&core.YNc(0,AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template,1,0,"cx-customer-selection",13),2&rf){const notCollapsed_r8=core.oxw(2).ngIf;core.Q6J("ngIf",notCollapsed_r8)}}function AsmMainUiComponent_ng_container_16_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template,2,1,"ng-container",10),core.ALo(2,"async"),core.YNc(3,AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template,1,1,"ng-template",null,12,core.W1O),core.BQk()),2&rf){const _r13=core.MAs(4),ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r9.customer$))("ngIfElse",_r13)}}function AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template(rf,ctx){if(1&rf){const _r23=core.EpF();core.TgZ(0,"cx-csagent-login-form",16),core.NdJ("submitEvent",__name(function($event){core.CHM(_r23);const ctx_r22=core.oxw(3);return core.KtG(ctx_r22.loginCustomerSupportAgent($event))},"AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template_cx_csagent_login_form_submitEvent_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const ctx_r21=core.oxw(3);core.Q6J("csAgentTokenLoading",core.lcZ(1,1,ctx_r21.csAgentTokenLoading$))}}function AsmMainUiComponent_ng_container_16_ng_template_3_Template(rf,ctx){if(1&rf&&core.YNc(0,AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template,2,3,"cx-csagent-login-form",15),2&rf){const notCollapsed_r8=core.oxw().ngIf;core.Q6J("ngIf",notCollapsed_r8)}}function AsmMainUiComponent_ng_container_16_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_16_ng_container_1_Template,5,4,"ng-container",10),core.ALo(2,"async"),core.YNc(3,AsmMainUiComponent_ng_container_16_ng_template_3_Template,1,1,"ng-template",null,11,core.W1O),core.BQk()),2&rf){const _r10=core.MAs(4),ctx_r3=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r3.customerSupportAgentLoggedIn$))("ngIfElse",_r10)}}__name(CustomerSelectionComponent_div_9_button_2_Template,"CustomerSelectionComponent_div_9_button_2_Template"),__name(CustomerSelectionComponent_div_9_button_3_Template,"CustomerSelectionComponent_div_9_button_3_Template"),__name(CustomerSelectionComponent_div_9_Template,"CustomerSelectionComponent_div_9_Template"),__name(CustomerSelectionComponent_div_11_Template,"CustomerSelectionComponent_div_11_Template"),__name(CustomerEmulationComponent_ng_container_0_Template,"CustomerEmulationComponent_ng_container_0_Template"),__name(AsmToggleUiComponent_span_2_Template,"AsmToggleUiComponent_span_2_Template"),__name(AsmToggleUiComponent_span_3_Template,"AsmToggleUiComponent_span_3_Template"),__name(AsmMainUiComponent_cx_asm_session_timer_9_Template,"AsmMainUiComponent_cx_asm_session_timer_9_Template"),__name(AsmMainUiComponent_button_11_Template,"AsmMainUiComponent_button_11_Template"),__name(AsmMainUiComponent_button_14_Template,"AsmMainUiComponent_button_14_Template"),__name(AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template,"AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template"),__name(AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template,"AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template"),__name(AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template,"AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template"),__name(AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template,"AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template"),__name(AsmMainUiComponent_ng_container_16_ng_container_1_Template,"AsmMainUiComponent_ng_container_16_ng_container_1_Template"),__name(AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template,"AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template"),__name(AsmMainUiComponent_ng_container_16_ng_template_3_Template,"AsmMainUiComponent_ng_container_16_ng_template_3_Template"),__name(AsmMainUiComponent_ng_container_16_Template,"AsmMainUiComponent_ng_container_16_Template");class AsmComponentService{constructor(authService,csAgentAuthService,winRef){this.authService=authService,this.csAgentAuthService=csAgentAuthService,this.winRef=winRef}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(spartacus_asm_root.AJ)}}__name(AsmComponentService,"AsmComponentService"),AsmComponentService.\u0275fac=__name(function(t){return new(t||AsmComponentService)(core.LFG(spartacus_core.e80),core.LFG(spartacus_asm_root.FA),core.LFG(spartacus_core.X9E))},"AsmComponentService_Factory"),AsmComponentService.\u0275prov=core.Yz7({token:AsmComponentService,factory:AsmComponentService.\u0275fac,providedIn:"root"});class CSAgentLoginFormComponent{constructor(fb){this.fb=fb,this.csAgentTokenLoading=!1,this.submitEvent=new core.vpe}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[fesm2015_forms.kI.required]],password:["",[fesm2015_forms.kI.required]]})}onSubmit(){var _a,_b;this.csAgentLoginForm.valid?this.submitEvent.emit({userId:null===(_a=this.csAgentLoginForm.get("userId"))||void 0===_a?void 0:_a.value,password:null===(_b=this.csAgentLoginForm.get("password"))||void 0===_b?void 0:_b.value}):this.csAgentLoginForm.markAllAsTouched()}}__name(CSAgentLoginFormComponent,"CSAgentLoginFormComponent"),CSAgentLoginFormComponent.\u0275fac=__name(function(t){return new(t||CSAgentLoginFormComponent)(core.Y36(fesm2015_forms.QS))},"CSAgentLoginFormComponent_Factory"),CSAgentLoginFormComponent.\u0275cmp=core.Xpm({type:CSAgentLoginFormComponent,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","spinner","aria-hidden","false",4,"ngIf"],[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","userId",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",3,"placeholder"],["type","submit"],["aria-hidden","false",1,"spinner"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CSAgentLoginFormComponent_form_0_Template,12,12,"form",0),core.YNc(1,CSAgentLoginFormComponent_div_1_Template,5,3,"div",1)),2&rf&&(core.Q6J("ngIf",!ctx.csAgentTokenLoading),core.xp6(1),core.Q6J("ngIf",ctx.csAgentTokenLoading))},"CSAgentLoginFormComponent_Template"),dependencies:[common.O5,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.Q7,fesm2015_forms.sg,fesm2015_forms.u,spartacus_storefront.Ahv,spartacus_storefront.X84,spartacus_core.X$D],encapsulation:2});class CustomerSelectionComponent{constructor(fb,asmService,config){this.fb=fb,this.asmService=asmService,this.config=config,this.subscription=new Subscription.w,this.submitEvent=new core.vpe}ngOnInit(){this.customerSelectionForm=this.fb.group({searchTerm:["",fesm2015_forms.kI.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe((0,debounceTime.b)(300)).subscribe(searchTermValue=>{this.handleSearchTerm(searchTermValue)}))}handleSearchTerm(searchTermValue){var _a,_b;!!this.selectedCustomer&&searchTermValue!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!Boolean(this.selectedCustomer)&&(this.asmService.customerSearchReset(),searchTermValue.trim().length>=3&&this.asmService.customerSearch({query:searchTermValue,pageSize:null===(_b=null===(_a=this.config.asm)||void 0===_a?void 0:_a.customerSearch)||void 0===_b?void 0:_b.maxResults}))}selectCustomerFromList(customer){this.selectedCustomer=customer,this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset()}onSubmit(){this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(event){if(Boolean(this.resultList)){if(this.resultList.nativeElement.contains(event.target)||this.searchTerm.nativeElement.contains(event.target))return;this.asmService.customerSearchReset()}}closeResults(){this.asmService.customerSearchReset()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}}__name(CustomerSelectionComponent,"CustomerSelectionComponent"),CustomerSelectionComponent.\u0275fac=__name(function(t){return new(t||CustomerSelectionComponent)(core.Y36(fesm2015_forms.QS),core.Y36(AsmService),core.Y36(AsmConfig))},"CustomerSelectionComponent_Factory"),CustomerSelectionComponent.\u0275cmp=core.Xpm({type:CustomerSelectionComponent,selectors:[["cx-customer-selection"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(_c0,5),core.Gf(_c1,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.resultList=_t.first),core.iGM(_t=core.CRH())&&(ctx.searchTerm=_t.first)}},"CustomerSelectionComponent_Query"),hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx.onDocumentClick($event)},"CustomerSelectionComponent_click_HostBindingHandler"),!1,core.evT)},"CustomerSelectionComponent_HostBindings"),outputs:{submitEvent:"submitEvent"},decls:13,vars:14,consts:[[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","searchTerm",3,"placeholder"],["searchTerm",""],[3,"control"],["type","submit"],["class","asm-results",4,"ngIf"],[1,"asm-results"],["resultList",""],[3,"click",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"result-name"],[1,"result-id"],["aria-hidden","false",1,"spinner"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"form",0),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"CustomerSelectionComponent_Template_form_ngSubmit_0_listener")),core.TgZ(1,"label"),core._UZ(2,"input",1,2),core.ALo(4,"cxTranslate"),core._UZ(5,"cx-form-errors",3),core.qZA(),core.TgZ(6,"button",4),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA()(),core.YNc(9,CustomerSelectionComponent_div_9_Template,5,4,"div",5),core.ALo(10,"async"),core.YNc(11,CustomerSelectionComponent_div_11_Template,6,3,"div",5),core.ALo(12,"async")),2&rf&&(core.Q6J("formGroup",ctx.customerSelectionForm),core.xp6(2),core.s9C("placeholder",core.lcZ(4,6,"asm.customerSearch.searchTerm.label")),core.xp6(3),core.Q6J("control",ctx.customerSelectionForm.get("searchTerm")),core.xp6(2),core.hij(" ",core.lcZ(8,8,"asm.customerSearch.submit")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(10,10,ctx.searchResults)),core.xp6(2),core.Q6J("ngIf",core.lcZ(12,12,ctx.searchResultsLoading$)))},"CustomerSelectionComponent_Template"),dependencies:[common.sg,common.O5,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.Q7,fesm2015_forms.sg,fesm2015_forms.u,spartacus_storefront.Ahv,common.Ov,spartacus_core.X$D],encapsulation:2});class FormatTimerPipe{transform(totalSeconds){totalSeconds<0&&(totalSeconds=0);const minutes=Math.floor(totalSeconds/60),seconds=totalSeconds%60;let zeroPaddedMinutes;zeroPaddedMinutes=minutes<10?("00"+minutes).slice(-2):minutes+"";return`${zeroPaddedMinutes}:${("00"+seconds).slice(-2)}`}}__name(FormatTimerPipe,"FormatTimerPipe"),FormatTimerPipe.\u0275fac=__name(function(t){return new(t||FormatTimerPipe)},"FormatTimerPipe_Factory"),FormatTimerPipe.\u0275pipe=core.Yjl({name:"formatTimer",type:FormatTimerPipe,pure:!0});class AsmSessionTimerComponent{constructor(config,asmComponentService,routingService,changeDetectorRef,userIdService){this.config=config,this.asmComponentService=asmComponentService,this.routingService=routingService,this.changeDetectorRef=changeDetectorRef,this.userIdService=userIdService,this.subscriptions=new Subscription.w,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.timeLeft=this.getTimerStartDelayInSeconds(),this.interval=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(isNavigating=>{isNavigating&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe((0,distinctUntilChanged.x)()).subscribe(()=>this.resetTimer()))}resetTimer(){this.timeLeft>0&&(this.timeLeft=this.getTimerStartDelayInSeconds())}getTimerStartDelayInSeconds(){var _a,_b;return void 0===(null===(_b=null===(_a=this.config.asm)||void 0===_a?void 0:_a.agentSessionTimer)||void 0===_b?void 0:_b.startingDelayInSeconds)?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}}__name(AsmSessionTimerComponent,"AsmSessionTimerComponent"),AsmSessionTimerComponent.\u0275fac=__name(function(t){return new(t||AsmSessionTimerComponent)(core.Y36(AsmConfig),core.Y36(AsmComponentService),core.Y36(spartacus_core.Znh),core.Y36(core.sBO),core.Y36(spartacus_core.XBV))},"AsmSessionTimerComponent_Factory"),AsmSessionTimerComponent.\u0275cmp=core.Xpm({type:AsmSessionTimerComponent,selectors:[["cx-asm-session-timer"]],decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"title","click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"span",0),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.TgZ(3,"span",1),core._uU(4),core.ALo(5,"formatTimer"),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"button",2),core.NdJ("click",__name(function(){return ctx.resetTimer()},"AsmSessionTimerComponent_Template_button_click_7_listener")),core.ALo(8,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("",core.lcZ(2,4,"asm.agentSessionTimer.label"),":"),core.xp6(3),core.AsE("",core.lcZ(5,6,ctx.timeLeft)," ",core.lcZ(6,8,"asm.agentSessionTimer.minutes"),""),core.xp6(3),core.s9C("title",core.lcZ(8,10,"asm.agentSessionTimer.reset")))},"AsmSessionTimerComponent_Template"),dependencies:[spartacus_core.X$D,FormatTimerPipe],encapsulation:2});class CustomerEmulationComponent{constructor(asmComponentService,userAccountFacade){this.asmComponentService=asmComponentService,this.userAccountFacade=userAccountFacade,this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.userAccountFacade.get().subscribe(user=>{user&&(this.customer=user)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}ngOnDestroy(){this.subscription.unsubscribe()}}__name(CustomerEmulationComponent,"CustomerEmulationComponent"),CustomerEmulationComponent.\u0275fac=__name(function(t){return new(t||CustomerEmulationComponent)(core.Y36(AsmComponentService),core.Y36(spartacus_user_account_root.gf))},"CustomerEmulationComponent_Factory"),CustomerEmulationComponent.\u0275cmp=core.Xpm({type:CustomerEmulationComponent,selectors:[["cx-customer-emulation"]],decls:2,vars:3,consts:[[4,"ngIf"],["formcontrolname","customer","type","text","disabled","true",3,"placeholder"],[3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CustomerEmulationComponent_ng_container_0_Template,5,5,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.isCustomerEmulationSessionInProgress$))},"CustomerEmulationComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2});class AsmToggleUiComponent{constructor(asmService){this.asmService=asmService,this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(uiState=>{this.isCollapsed=void 0!==uiState.collapsed&&uiState.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}}__name(AsmToggleUiComponent,"AsmToggleUiComponent"),AsmToggleUiComponent.\u0275fac=__name(function(t){return new(t||AsmToggleUiComponent)(core.Y36(AsmService))},"AsmToggleUiComponent_Factory"),AsmToggleUiComponent.\u0275cmp=core.Xpm({type:AsmToggleUiComponent,selectors:[["cx-asm-toggle-ui"]],decls:4,vars:3,consts:[[1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"a",0),core.NdJ("click",__name(function(){return ctx.toggleUi()},"AsmToggleUiComponent_Template_a_click_0_listener")),core._UZ(1,"span",1),core.YNc(2,AsmToggleUiComponent_span_2_Template,3,3,"span",2),core.YNc(3,AsmToggleUiComponent_span_3_Template,3,3,"span",2),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngClass",ctx.isCollapsed?"expandIcon":"collapseIcon"),core.xp6(1),core.Q6J("ngIf",!ctx.isCollapsed),core.xp6(1),core.Q6J("ngIf",ctx.isCollapsed))},"AsmToggleUiComponent_Template"),dependencies:[common.mk,common.O5,spartacus_core.X$D],encapsulation:2});class AsmMainUiComponent{constructor(authService,csAgentAuthService,asmComponentService,globalMessageService,routingService,asmService,userAccountFacade){this.authService=authService,this.csAgentAuthService=csAgentAuthService,this.asmComponentService=asmComponentService,this.globalMessageService=globalMessageService,this.routingService=routingService,this.asmService=asmService,this.userAccountFacade=userAccountFacade,this.disabled=!1,this.startingCustomerSession=!1}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn(),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe((0,switchMap.w)(isLoggedIn=>isLoggedIn?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):(0,of.of)(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe((0,map.U)(uiState=>void 0!==uiState.collapsed&&uiState.collapsed))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe((0,take.q)(1)).subscribe(isCustomerEmulated=>{this.startingCustomerSession&&isCustomerEmulated&&(this.startingCustomerSession=!1,this.globalMessageService.remove(spartacus_core.xUg.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId,password}){this.csAgentAuthService.authorizeCustomerSupportAgent(userId,password)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId}){customerId?(this.csAgentAuthService.startCustomerEmulationSession(customerId),this.startingCustomerSession=!0):this.globalMessageService.add({key:"asm.error.noCustomerId"},spartacus_core.xUg.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}}__name(AsmMainUiComponent,"AsmMainUiComponent"),AsmMainUiComponent.\u0275fac=__name(function(t){return new(t||AsmMainUiComponent)(core.Y36(spartacus_core.e80),core.Y36(spartacus_asm_root.FA),core.Y36(AsmComponentService),core.Y36(spartacus_core.IWp),core.Y36(spartacus_core.Znh),core.Y36(AsmService),core.Y36(spartacus_user_account_root.gf))},"AsmMainUiComponent_Factory"),AsmMainUiComponent.\u0275cmp=core.Xpm({type:AsmMainUiComponent,selectors:[["cx-asm-main-ui"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("hidden",ctx.disabled)},"AsmMainUiComponent_HostBindings"),decls:18,vars:20,consts:[[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt"],[1,"asm-title"],[1,"asm-bar-actions"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],[1,"close",3,"title","click"],[1,"logout",3,"title","click"],[4,"ngIf","ngIfElse"],["showLoginForm",""],["showCustomerSelection",""],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"csAgentTokenLoading","submitEvent"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1),core._UZ(2,"img",2),core.ALo(3,"cxTranslate"),core.TgZ(4,"div",3),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.TgZ(7,"div",4),core._UZ(8,"cx-asm-toggle-ui"),core.YNc(9,AsmMainUiComponent_cx_asm_session_timer_9_Template,1,0,"cx-asm-session-timer",5),core.ALo(10,"async"),core.YNc(11,AsmMainUiComponent_button_11_Template,2,3,"button",6),core.ALo(12,"async"),core.ALo(13,"async"),core.YNc(14,AsmMainUiComponent_button_14_Template,2,3,"button",7),core.ALo(15,"async"),core.qZA()(),core.YNc(16,AsmMainUiComponent_ng_container_16_Template,5,4,"ng-container",5),core.ALo(17,"async")),2&rf&&(core.xp6(2),core.s9C("alt",core.lcZ(3,6,"asm.mainLogoLabel")),core.xp6(3),core.hij(" ",core.lcZ(6,8,"asm.mainTitle")," "),core.xp6(4),core.Q6J("ngIf",core.lcZ(10,10,ctx.customerSupportAgentLoggedIn$)),core.xp6(2),core.Q6J("ngIf",!core.lcZ(12,12,ctx.customerSupportAgentLoggedIn$)&&!core.lcZ(13,14,ctx.csAgentTokenLoading$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(15,16,ctx.customerSupportAgentLoggedIn$)),core.xp6(2),core.Q6J("ngIf",!core.lcZ(17,18,ctx.isCollapsed$)))},"AsmMainUiComponent_Template"),dependencies:[common.O5,CSAgentLoginFormComponent,CustomerSelectionComponent,AsmSessionTimerComponent,CustomerEmulationComponent,AsmToggleUiComponent,common.Ov,spartacus_core.X$D],encapsulation:2});const defaultAsmLayoutConfig={launch:{ASM:{outlet:"cx-storefront",component:AsmMainUiComponent}}};class AsmComponentsModule{}__name(AsmComponentsModule,"AsmComponentsModule"),AsmComponentsModule.\u0275fac=__name(function(t){return new(t||AsmComponentsModule)},"AsmComponentsModule_Factory"),AsmComponentsModule.\u0275mod=core.oAB({type:AsmComponentsModule}),AsmComponentsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultAsmLayoutConfig)],imports:[common.ez,fesm2015_forms.UX,spartacus_core.LUR,spartacus_storefront.Fym,spartacus_storefront.Ird]});var http=__webpack_require__(520);class OccAsmAdapter{constructor(http2,occEndpointsService,converterService,config,baseSiteService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService,this.config=config,this.baseSiteService=baseSiteService,this.baseSiteService.getActive().subscribe(value=>this.activeBaseSite=value)}customerSearch(options){const headers=spartacus_core.Fox.createHeader(spartacus_core.OPk,!0,new http.WM);let params=(new http.LE).set("baseSite",this.activeBaseSite).set("sort","byNameAsc");void 0!==options.query&&(params=params.set("query",""+options.query)),void 0!==options.pageSize&&(params=params.set("pageSize",""+options.pageSize));const url=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.get(url,{headers,params}).pipe(this.converterService.pipeable(CUSTOMER_SEARCH_PAGE_NORMALIZER))}}__name(OccAsmAdapter,"OccAsmAdapter"),OccAsmAdapter.\u0275fac=__name(function(t){return new(t||OccAsmAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI),core.LFG(AsmConfig),core.LFG(spartacus_core.Do$))},"OccAsmAdapter_Factory"),OccAsmAdapter.\u0275prov=core.Yz7({token:OccAsmAdapter,factory:OccAsmAdapter.\u0275fac});class AsmOccModule{}__name(AsmOccModule,"AsmOccModule"),AsmOccModule.\u0275fac=__name(function(t){return new(t||AsmOccModule)},"AsmOccModule_Factory"),AsmOccModule.\u0275mod=core.oAB({type:AsmOccModule}),AsmOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search"}}}}),{provide:AsmAdapter,useClass:OccAsmAdapter}],imports:[common.ez]});class AsmModule{}__name(AsmModule,"AsmModule"),AsmModule.\u0275fac=__name(function(t){return new(t||AsmModule)},"AsmModule_Factory"),AsmModule.\u0275mod=core.oAB({type:AsmModule}),AsmModule.\u0275inj=core.cJS({imports:[AsmComponentsModule,AsmCoreModule,AsmOccModule]})}};